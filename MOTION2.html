<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ultimate Web Animation Cheatsheet (GSAP, Framer Motion, WAAPI, CSS)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Draggable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Flip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/MotionPathPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/CustomEase.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Observer.min.js"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    animation: { 'gradient-text': 'gradient-text 5s ease infinite' },
                    keyframes: { 'gradient-text': { '0%, 100%': { 'background-size': '200% 200%', 'background-position': 'left center' }, '50%': { 'background-size': '200% 200%', 'background-position': 'right center' } } },
                },
            },
        }
    </script>
    <style>
        :root {
            --bg-gradient-start: #141e30; --bg-gradient-end: #243b55; --container-bg: rgba(255, 255, 255, 0.98); --text-color: #333; --header-bg-start: #159957; --header-bg-end: #155799; --header-text: white; --section-bg: #f8f9fa; --section-border: #159957; --section-h2: #147d49; --section-h3: #159957; --card-bg: white; --card-border: #159957; --code-bg: #1e293b; --code-text: #e2e8f0; --interactive-btn-bg: #159957; --interactive-btn-hover: #147d49; --search-bg: #f0fdf4; --search-border: #dcfce7; --search-focus-border: #159957; --search-focus-shadow: rgba(21, 153, 87, 0.2); --highlight-bg: #facc15; --highlight-text: #333; --toc-bg: rgba(255, 255, 255, 0.1); --toc-link-bg: rgba(255, 255, 255, 0.8); --toc-link-hover-bg: white; --toc-link-text: #14532d; --footer-bg: #141e30; --footer-text: #bdc3c7; --output-bg: #0f172a;
        }
        html.dark {
            --bg-gradient-start: #0f172a; --bg-gradient-end: #1e293b; --container-bg: rgba(16, 24, 40, 0.98); --text-color: #cbd5e1; --header-bg-start: #1e293b; --header-bg-end: #334155; --header-text: #f1f5f9; --section-bg: #1e293b; --section-border: #4ade80; --section-h2: #86efac; --section-h3: #4ade80; --card-bg: #0f172a; --card-border: #4ade80; --code-bg: #020617; --code-text: #e2e8f0; --interactive-btn-bg: #4ade80; --interactive-btn-hover: #86efac; --search-bg: #1e293b; --search-border: #334155; --search-focus-border: #4ade80; --search-focus-shadow: rgba(74, 222, 128, 0.2); --highlight-bg: #facc15; --highlight-text: #1e293b; --toc-bg: rgba(0, 0, 0, 0.2); --toc-link-bg: #1e293b; --toc-link-hover-bg: #0f172a; --toc-link-text: #94a3b8; --footer-bg: #0f172a; --footer-text: #94a3b8; --output-bg: #020617;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Poppins', sans-serif; line-height: 1.7; color: var(--text-color); background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%); min-height: 100vh; padding: 20px; transition: background 0.3s ease, color 0.3s ease; }
        .cheatsheet-container { max-width: 1200px; margin: 0 auto; background: var(--container-bg); border-radius: 20px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); }
        .cheatsheet-header { background: linear-gradient(135deg, var(--header-bg-start), var(--header-bg-end)); color: var(--header-text); padding: 30px; text-align: center; border-radius: 10px 10px 0 0; }
        .cheatsheet-header h1 { font-size: 2.5rem; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); font-weight: 700; }
        .cheatsheet-header p { font-size: 1.1rem; opacity: 0.9; margin-bottom: 10px; }
        .content { padding: 40px; }
        .toc-container { padding: 20px 40px; background: var(--toc-bg); border-bottom: 2px solid var(--section-border); }
        .toc-container h3 { text-align: center; margin-bottom: 15px; color: var(--section-h2); font-size: 1.2rem; }
        .toc-container ul { list-style-type: none; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; padding: 0; }
        .toc-container li a { display: block; padding: 8px 15px; background-color: var(--toc-link-bg); color: var(--toc-link-text); text-decoration: none; border-radius: 20px; font-size: 0.9rem; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .toc-container li a:hover, .toc-container li a.active { background-color: var(--interactive-btn-bg); color: #fff; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
        .section { margin-bottom: 80px; background: var(--section-bg); border-radius: 20px; padding: 50px; border-left: 5px solid var(--section-border); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); opacity: 0; transform: translateY(20px); transition: opacity 0.8s ease-out, transform 0.8s ease-out, background 0.3s ease; scroll-margin-top: 20px; }
        .section.is-visible { opacity: 1; transform: translateY(0); }
        .section h2 { color: var(--section-h2); font-size: 1.8rem; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid var(--section-border); font-weight: 700; }
        .section h3 { color: var(--section-h3); font-size: 1.5rem; margin: 40px 0 20px 0; font-weight: 700; }
        .code-block { background: var(--code-bg); border-radius: 10px; padding: 20px; margin: 15px 0; overflow-x: auto; box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3); position: relative; }
        .code-block pre { color: var(--code-text); font-family: 'Consolas', 'Monaco', 'Courier New', monospace; font-size: 14px; line-height: 1.8; white-space: pre-wrap; word-wrap: break-word; }
        .example { background: #f0fdf4; border: 1px solid var(--section-border); border-radius: 12px; padding: 30px; margin: 25px 0; }
        html.dark .example { background: #111827; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 40px; margin: 40px 0; }
        .card { background: var(--card-bg); border-radius: 15px; padding: 30px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); border-left: 4px solid var(--card-border); transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease; overflow-wrap: break-word; word-wrap: break-word; margin-bottom: 0; min-height: 250px; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15); }
        .card h4 { color: var(--section-h2); margin-bottom: 20px; font-weight: 700; font-size: 1.2rem; }
        .card p { margin-bottom: 15px; line-height: 1.7; }
        .card ul { padding-left: 25px; } .card li { margin-bottom: 12px; line-height: 1.6; }
        .interactive-btn { background: var(--interactive-btn-bg); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; transition: all 0.3s ease; font-family: 'Poppins', sans-serif; font-size: 0.9rem;}
        .interactive-btn:hover { background: var(--interactive-btn-hover); transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); }
        .output { background: var(--output-bg); color: #94a3b8; padding: 15px; border-radius: 8px; margin-top: 15px; font-family: monospace; min-height: 40px; transition: all 0.3s ease; text-align: left; white-space: pre-wrap; }
        .search-container { display: flex; justify-content: center; align-items: center; margin-bottom: 30px; padding: 15px; background: var(--search-bg); border-radius: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); }
        .search-container input[type="text"] { flex-grow: 1; padding: 12px 15px; border: 2px solid var(--search-border); border-radius: 8px; font-size: 1rem; outline: none; transition: border-color 0.3s ease, box-shadow 0.3s ease; background-color: var(--card-bg); color: var(--text-color); }
        .search-container input[type="text"]:focus { border-color: var(--search-focus-border); box-shadow: 0 0 0 3px var(--search-focus-shadow); }
        .highlight { background-color: var(--highlight-bg); color: var(--highlight-text); padding: 2px 4px; border-radius: 3px; font-weight: bold; }
        #backToTopBtn { display: none; position: fixed; bottom: 20px; right: 30px; z-index: 1001; border: none; outline: none; background-color: var(--interactive-btn-bg); color: white; cursor: pointer; padding: 15px; border-radius: 50%; font-size: 18px; width: 50px; height: 50px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); transition: all 0.3s; }
        #backToTopBtn:hover { background-color: var(--interactive-btn-hover); transform: translateY(-3px); }
        .theme-switch-wrapper { position: fixed; bottom: 80px; right: 25px; z-index: 1001; }
        .theme-switch { display: inline-block; height: 34px; position: relative; width: 60px; }
        .theme-switch input { display:none; }
        .slider { background-color: #ccc; bottom: 0; cursor: pointer; left: 0; position: absolute; right: 0; top: 0; transition: .4s; border-radius: 34px; }
        .slider:before { background-color: #fff; bottom: 4px; content: ""; height: 26px; left: 4px; position: absolute; transition: .4s; width: 26px; border-radius: 50%; }
        input:checked + .slider { background-color: var(--interactive-btn-bg); }
        input:checked + .slider:before { transform: translateX(26px); }
        #searchNav { display: none; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background-color: #0f2027; color: #f1f5f9; padding: 8px 15px; border-radius: 50px; z-index: 1002; box-shadow: 0 5px 15px rgba(0,0,0,0.3); align-items: center; gap: 15px; }
        #searchNav button { background: var(--interactive-btn-bg); color: white; border: none; border-radius: 50%; width: 35px; height: 35px; font-size: 1.2rem; line-height: 1; cursor: pointer; transition: background-color 0.3s; }
        #searchNav button:hover { background: var(--interactive-btn-hover); }
        #searchNavCount { font-weight: bold; font-size: 0.9rem; min-width: 60px; text-align: center; }
        .current-search-match { outline: 2px solid var(--interactive-btn-hover); animation: pulse-highlight 1.2s infinite; border-radius: 3px; }
        @keyframes pulse-highlight { 0% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(74, 222, 128, 0); } 100% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0); } }
        .footer { background-color: var(--footer-bg); color: var(--footer-text); text-align: center; padding: 20px; margin-top: 40px; font-size: 0.9rem; border-radius: 0 0 10px 10px; }
        .copy-btn { position: absolute; top: 10px; right: 10px; background: var(--interactive-btn-bg); color: #fff; border: none; border-radius: 4px; padding: 4px 10px; font-size: 0.85em; cursor: pointer; opacity: 0.85; transition: all 0.2s; z-index: 2; }
        .copy-btn:hover { background: var(--interactive-btn-hover); opacity: 1; }
        .copy-btn.copied { background: #22c55e; }
        .demo-code-toggle { display: inline-block; margin: 8px 0 0 0; background: var(--interactive-btn-bg); color: #fff; border: none; border-radius: 4px; padding: 4px 14px; font-size: 0.95em; cursor: pointer; transition: background 0.2s; }
        .demo-code-block { display: none; margin-top: 10px; }
        .demo-code-block.visible { display: block; }
        .live-controls { background: #e0f2fe; border: 1px solid #7dd3fc; border-radius: 8px; padding: 15px; margin-top: 15px; display: flex; flex-wrap: wrap; gap: 15px; align-items: center; }
        html.dark .live-controls { background: #0c4a6e; border-color: #0ea5e9; }
        .live-controls label { font-weight: 600; color: var(--section-h3); }
        .live-controls input, .live-controls select { padding: 5px; border-radius: 4px; border: 1px solid #ccc; }
        #filterContainer { padding: 10px 40px; background: var(--section-bg); text-align: center; }
        #filterContainer button { margin: 5px; transition: background 0.2s, color 0.2s; }
        #filterContainer button.active { background: #facc15; color: #333; }
        #batchGrid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        #batchGrid .card { opacity: 0; transform: scale(0.5); min-height: 80px; }
        #staggerDemoGrid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        #staggerDemoGrid div { width: 100%; height: 60px; background-color: #818cf8; border-radius: 8px; }
        .framer-demo-item { padding: 10px; border: 1px dashed var(--card-border); border-radius: 8px; margin: 5px; background: var(--card-bg); }
        #magnetic-button { padding: 20px 40px; border-radius: 50px; background: var(--interactive-btn-bg); color: white; font-weight: bold; display: inline-block; }
        #magnetic-cursor { width: 20px; height: 20px; background: var(--interactive-btn-hover); border-radius: 50%; position: fixed; top: 0; left: 0; pointer-events: none; z-index: 9999; }
        .marquee { display: flex; width: max-content; }
        .marquee-wrapper { overflow: hidden; }
        .marquee span { font-size: 2rem; font-weight: 600; padding: 0 2rem; }
    </style>
</head>
<body>
    <div id="magnetic-cursor"></div>
    <div class="cheatsheet-container" role="main" id="mainContent">
        <header class="cheatsheet-header">
            <h1 class="animate-gradient-text bg-gradient-to-r from-green-300 via-blue-500 to-purple-600 bg-clip-text text-white" style="color:#fff !important;">
                ✨ The Ultimate Web Animation Cheatsheet ✨
                <span style="font-size:1.1rem;font-weight:400;display:block;margin-top:8px;color:#fff;">GSAP | Framer Motion | WAAPI | CSS</span>
            </h1>
            <p style="color:#fff;">Your definitive interactive guide to mastering motion on the web.</p>
        </header>

        <div id="filterContainer">
            <button class="interactive-btn active" data-filter="all">All</button>
            <button class="interactive-btn" data-filter="Introduction">Mindset</button>
            <button class="interactive-btn" data-filter="GSAP: Core">GSAP Core</button>
            <button class="interactive-btn" data-filter="GSAP: ScrollTrigger">ScrollTrigger</button>
            <button class="interactive-btn" data-filter="GSAP: Plugins">Plugins</button>
            <button class="interactive-btn" data-filter="Performance">Performance</button>
            <button class="interactive-btn" data-filter="GSAP: Frameworks">Frameworks</button>
            <button class="interactive-btn" data-filter="Codegrid Effects">Codegrid Effects</button>
            <button class="interactive-btn" data-filter="Framer Motion">Framer Motion</button>
            <button class="interactive-btn" data-filter="WAAPI/CSS">WAAPI/CSS</button>
        </div>

        <nav id="tocNav" class="toc-container" aria-label="Table of Contents">
            <h3>Quick Navigation</h3>
            <ul><!-- Dynamically Generated --></ul>
        </nav>

        <div class="content">
            <div class="search-container" id="searchContainer" aria-label="Search Cheatsheet">
                <input type="text" id="searchInput" placeholder="Live search (e.g., ScrollTrigger, timeline, ease)..." aria-label="Search input">
            </div>

            <div class="section" data-topic="Introduction">
                <h2>🌐 Animation Technologies Compared</h2>
                <p>The web offers several powerful ways to animate elements. While they all achieve similar goals, their strengths and use cases vary significantly. This cheatsheet covers the most popular and performant options.</p>
                <div class="grid">
                    <div class="card"><h4>GSAP</h4><p><strong>Pros:</strong> Industry-standard for complex, high-performance, and pixel-perfect animations. Robust API, excellent browser compatibility, extensive plugin ecosystem. Unmatched control over timelines and easing.</p></div>
                    <div class="card"><h4>Framer Motion</h4><p><strong>Pros:</strong> React-first animation library. Declarative API makes it easy to integrate with React components. Great for component-level animations, gestures, and shared layout transitions.</p></div>
                    <div class="card"><h4>Web Animations API (WAAPI)</h4><p><strong>Pros:</strong> Native browser API. No external library needed. Good for simpler, isolated animations. Can be performant as it often runs on the compositor thread.</p></div>
                    <div class="card"><h4>CSS Animations & Transitions</h4><p><strong>Pros:</strong> Simplest to implement for basic effects. Zero JavaScript overhead. Good for declarative, fire-and-forget animations.</p></div>
                </div>
            </div>

            <div class="section" data-topic="Introduction">
                <h2>🧠 Getting Started: The Animation Mindset</h2>
                <p>Before writing a single line of code, it's helpful to understand the 'why' behind web animation. Good motion isn't just decorative; it serves a purpose.</p>
                <div class="grid">
                    <div class="card"><h4>Animate with Purpose</h4><p>Motion should guide the user, provide feedback, and enhance the narrative of your interface. Ask yourself: "What is this animation accomplishing?" Is it drawing attention to a new element? Is it confirming a user action? Is it making a state change feel smooth and understandable?</p></div>
                    <div class="card"><h4>Start with the End State</h4><p>It's often easier to design your component in its final, visible state in CSS, and then use JavaScript (like `gsap.from()`) to animate it *into* that state. This approach promotes cleaner code and better accessibility if JavaScript fails to load.</p></div>
                    <div class="card"><h4>Physics & Feeling</h4><p>Good animation feels natural. Objects in the real world don't start and stop instantly. They accelerate and decelerate. This is where **easing** is crucial. A simple `ease: "power2.out"` can make an animation feel 100x more professional than a linear, robotic motion.</p></div>
                </div>
            </div>

            <div class="section" data-topic="GSAP: Core">
                <h2>💡 GSAP: Core Concepts & Syntax</h2>
                <p>GSAP (GreenSock Animation Platform) is a high-performance JavaScript library for creating professional-grade animations. It is the industry standard for a reason: **performance, precision, and reliability**.</p>
                <h3>The Main Methods: `to()`, `from()`, `fromTo()`</h3>
                <div class="example">
                    <h4>Interactive Demo: `to`, `from`, `fromTo`</h4>
                    <div class="h-32 flex items-center justify-center"><div id="toFromDemoBox" class="w-24 h-24 bg-green-500 rounded-lg shadow-lg"></div></div>
                    <div class="text-center mt-4">
                        <button class="interactive-btn" onclick="runToFromDemo('to')">gsap.to()</button>
                        <button class="interactive-btn" onclick="runToFromDemo('from')">gsap.from()</button>
                        <button class="interactive-btn" onclick="runToFromDemo('fromTo')">gsap.fromTo()</button>
                    </div>
                    <div class="output" id="toFromOutput">Click a button to see the animation and its code.</div>
                </div>
            </div>

            <div class="section" data-topic="GSAP: Core">
                <h2>🎬 GSAP: Timelines - The Art of Sequencing</h2>
                <p>Timelines are the heart of complex animation. They let you chain tweens together, control them as a single unit, and create perfectly synchronized sequences with ease.</p>
                <div class="example">
                    <h3>Interactive Timeline Controller</h3>
                    <p>Use the controls below to manipulate the timeline. Change the values and hit "Update & Replay" to see your changes in real-time.</p>
                    <div class="h-32 flex items-center justify-center"><div id="timelineDemoBox" class="w-24 h-24 bg-rose-500 rounded-lg shadow-lg relative"></div></div>
                    <div class="live-controls">
                        <div><label for="timelineDuration">Duration:</label><input type="number" id="timelineDuration" value="1" step="0.1" min="0.1"></div>
                        <div><label for="timelineRotation">Rotation:</label><input type="number" id="timelineRotation" value="360" step="15"></div>
                        <div><label for="timelineEase">Final Ease:</label>
                            <select id="timelineEase">
                                <option value="bounce.out">bounce.out</option><option value="elastic.out(1, 0.3)">elastic.out</option><option value="power2.inOut" selected>power2.inOut</option>
                            </select>
                        </div>
                        <button class="interactive-btn" onclick="createTimelineDemo(true)">Update & Replay</button>
                    </div>
                    <div class="text-center mt-4">
                        <button class="interactive-btn" onclick="timelineControls.play()">Play</button>
                        <button class="interactive-btn" onclick="timelineControls.pause()">Pause</button>
                        <button class="interactive-btn" onclick="timelineControls.reverse()">Reverse</button>
                        <button class="interactive-btn" onclick="timelineControls.restart()">Restart</button>
                    </div>
                    <div class="mt-4"><label for="timelineScrubber" class="block text-center font-bold">Scrubber</label><input type="range" id="timelineScrubber" min="0" max="1" step="0.001" value="0" class="w-full"></div>
                </div>
            </div>

            <div class="section" data-topic="GSAP: Core">
                <h2>⚙️ GSAP: Advanced Tweening & Easing</h2>
                <p>**Easing** controls the *rate of change* of an animation. It's the single most important property for giving your animations personality and making them feel professional.</p>
                <h3>The Psychology of Easing</h3>
                <div class="grid">
                    <div class="card"><h4>`easeOut` (e.g., `power2.out`)</h4><p>Starts fast, ends slow. This feels responsive and natural, like an object coming to a gentle rest. **Perfect for:** UI elements appearing, menus sliding in, objects responding to a click.</p></div>
                    <div class="card"><h4>`easeInOut` (e.g., `power2.inOut`)</h4><p>Starts slow, accelerates, ends slow. This feels smooth, deliberate, and professional. **Perfect for:** Camera movements, scroll-to-section animations, and any transition where you don't want a jarring start or end.</p></div>
                    <div class="card"><h4>`easeIn` (e.g., `power2.in`)</h4><p>Starts slow, ends fast. This creates a feeling of anticipation or "winding up" before a rapid movement. **Perfect for:** Objects exiting the screen, or an element that is "launching" into its next state.</p></div>
                </div>
                <h3>Interactive Easing Visualizer</h3>
                <div class="example">
                    <div class="h-32 flex items-center"><div id="easeDemoBox" class="w-16 h-16 bg-blue-500 rounded-full shadow-lg"></div></div>
                    <div class="text-center mt-4">
                        <button class="interactive-btn" onclick="runEaseDemo('power1.inOut')">power1.inOut</button>
                        <button class="interactive-btn" onclick="runEaseDemo('back.out(1.7)')">back.out</button>
                        <button class="interactive-btn" onclick="runEaseDemo('elastic.out(1, 0.3)')">elastic.out</button>
                        <button class="interactive-btn" onclick="runEaseDemo('bounce.out')">bounce.out</button>
                    </div>
                    <div class="output" id="easeOutput">Click an ease to see it in action.</div>
                </div>
            </div>

            <div class="section" data-topic="GSAP: ScrollTrigger">
                <h2>🌊 GSAP: ScrollTrigger - The Scroll Animation Super-Plugin</h2>
                <p>**ScrollTrigger is the GSAP plugin that unlocks the modern web.** It lets you trigger animations based on the scroll position. If you want to build websites like the pros, you must master ScrollTrigger.</p>
                
                <h3>Demo 1: Scroll-Based Fade-In</h3>
                <p>Elements fade in as they enter the viewport, creating a smooth reveal effect.</p>
                <div class="example">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="fade-in-item bg-blue-500 p-8 rounded-lg text-white text-center opacity-0 text-xl font-bold min-h-32 flex items-center justify-center">Item 1</div>
                        <div class="fade-in-item bg-green-500 p-8 rounded-lg text-white text-center opacity-0 text-xl font-bold min-h-32 flex items-center justify-center">Item 2</div>
                        <div class="fade-in-item bg-purple-500 p-8 rounded-lg text-white text-center opacity-0 text-xl font-bold min-h-32 flex items-center justify-center">Item 3</div>
                    </div>
                    <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-js">// Scroll-based fade-in animation
gsap.utils.toArray('.fade-in-item').forEach(item => {
    gsap.fromTo(item, 
        { opacity: 0, y: 50 },
        { 
            opacity: 1, 
            y: 0, 
            duration: 0.8,
            ease: "power2.out",
            scrollTrigger: {
                trigger: item,
                start: "top 85%",
                end: "bottom 15%",
                toggleActions: "play none none reverse"
            }
        }
    );
});</code></pre></div>
                </div>

                <h3>Demo 2: Simple Pinned Section</h3>
                <p><strong>Pinning</strong> freezes an element in place for a certain scroll duration. This demo shows a simple pinned section that stays in view while you scroll.</p>
                <div class="example scroll-demo-example">
                    <div id="pinContainer" class="scroll-demo-pin-container">
                        <div id="pinTarget" class="bg-gradient-to-br from-purple-600 to-blue-600 p-12 rounded-xl min-h-64 flex flex-col justify-center text-center">
                            <div class="mb-8">
                                <div id="pinIcon" class="w-32 h-32 bg-white bg-opacity-20 rounded-full mx-auto flex items-center justify-center text-white text-6xl mb-4">📌</div>
                                <h4 class="text-white text-3xl font-bold mb-4">Pinned Section</h4>
                                <p class="text-white text-xl opacity-90">This section stays pinned while you scroll through the content below</p>
                            </div>
                        </div>
                        <div class="h-96 bg-gray-100 flex items-center justify-center text-gray-600 text-xl">
                            Scroll down to see the pinning effect
                        </div>
                        <div class="h-96 bg-gray-200 flex items-center justify-center text-gray-600 text-xl">
                            Keep scrolling...
                        </div>
                        <div class="h-96 bg-gray-300 flex items-center justify-center text-gray-600 text-xl">
                            Almost there...
                        </div>
                        <div class="h-96 bg-gray-400 flex items-center justify-center text-gray-600 text-xl">
                            You made it!
                        </div>
                    </div>
                </div>

                <h3>Demo 3: Scroll-Triggered Counter Animation</h3>
                <p>Animate numbers counting up when they enter the viewport, perfect for statistics and metrics displays.</p>
                <div class="example">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                        <div class="text-center">
                            <div id="counter1" class="text-6xl font-bold text-blue-600 mb-2">0</div>
                            <div class="text-xl text-gray-600">Projects Completed</div>
                        </div>
                        <div class="text-center">
                            <div id="counter2" class="text-6xl font-bold text-green-600 mb-2">0</div>
                            <div class="text-xl text-gray-600">Happy Clients</div>
                        </div>
                        <div class="text-center">
                            <div id="counter3" class="text-6xl font-bold text-purple-600 mb-2">0</div>
                            <div class="text-xl text-gray-600">Awards Won</div>
                        </div>
                    </div>
                    <div class="h-96 bg-gradient-to-b from-blue-500 to-purple-500 flex items-center justify-center text-white text-3xl font-bold">
                        Scroll down to trigger the counters
                    </div>
                    <div class="h-96 bg-gradient-to-b from-purple-500 to-pink-500 flex items-center justify-center text-white text-3xl font-bold">
                        Keep scrolling to see the animation
                    </div>
                    <div class="text-center mt-4">
                        <button class="interactive-btn" onclick="resetCounters()">🔄 Reset Counters</button>
                    </div>
                    <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-js">// Scroll-triggered counter animation
ScrollTrigger.create({
    trigger: "#counter1",
    start: "top 80%",
    onEnter: () => {
        gsap.to("#counter1", {
            innerHTML: 150,
            duration: 2,
            ease: "power2.out",
            snap: { innerHTML: 1 },
            onUpdate: function() {
                this.targets()[0].innerHTML = Math.ceil(this.targets()[0].innerHTML);
            }
        });
        gsap.to("#counter2", {
            innerHTML: 89,
            duration: 2,
            ease: "power2.out",
            snap: { innerHTML: 1 },
            onUpdate: function() {
                this.targets()[0].innerHTML = Math.ceil(this.targets()[0].innerHTML);
            }
        });
        gsap.to("#counter3", {
            innerHTML: 23,
            duration: 2,
            ease: "power2.out",
            snap: { innerHTML: 1 },
            onUpdate: function() {
                this.targets()[0].innerHTML = Math.ceil(this.targets()[0].innerHTML);
            }
        });
    }
});</code></pre></div>
                </div>
            </div>

            <div class="section" data-topic="GSAP: Plugins">
                <h2>🧩 GSAP: Advanced Plugins - Superpowers</h2>
                <p>GSAP's plugin ecosystem is vast. Here are some of the most useful plugins for creating unique interactions and effects.</p>
                <div class="grid">
                    <div class="card"><h4>Draggable</h4><p>Makes any element draggable with mouse or touch. Incredibly robust with features like inertia, bounds, and snapping.</p><div class="example" style="position: relative; height: 200px; border: 2px dashed #ccc; border-radius: 8px;"><div id="draggableDemo" class="w-32 h-32 bg-sky-500 rounded-full shadow-lg flex items-center justify-center text-white font-bold cursor-grab" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">Drag Me</div></div></div>
                    <div class="card"><h4>Flip</h4><p>Animates changes in state. It calculates the difference when an element changes size, position, or parent, then smoothly animates it. **Perfect for sorting, filtering, and reorganizing layouts.**</p><div class="example"><div id="flipContainer" class="grid grid-cols-2 gap-2"></div><div class="text-center mt-4"><button class="interactive-btn" onclick="runFlipDemo()">Shuffle</button></div></div></div>
                </div>
            </div>

            <div class="section" data-topic="GSAP: Plugins">
                <h2>🎨 Advanced SVG Animation</h2>
                <p>GSAP's premium plugins unlock incredible SVG capabilities. While these plugins require a Club GreenSock membership, they enable effects that are otherwise nearly impossible.</p>
                <div class="grid">
                    <div class="card">
                        <h4>SVG Path Animation (Working Demo)</h4>
                        <p>Animate the stroke of an SVG path to create a "draw-in" effect, perfect for logos and illustrations.</p>
                        <div class="example">
                            <svg id="svgPathDemo" class="w-full h-32" viewBox="0 0 100 100">
                                <path id="svgPath" d="M10 50 C 30 10, 70 10, 90 50 S 70 90, 50 90, 10 50, 10 50" stroke="#22d3ee" stroke-width="3" fill="none"/>
                            </svg>
                            <div class="text-center mt-4"><button class="interactive-btn" onclick="runSvgPathDemo()">Draw Path</button></div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// SVG Path Drawing Animation
function runSvgPathDemo() {
    const path = document.getElementById('svgPath');
    const length = path.getTotalLength();
    gsap.set(path, { strokeDasharray: length, strokeDashoffset: length });
    gsap.to(path, { 
        strokeDashoffset: 0, 
    duration: 2,
        ease: 'power2.inOut' 
    });
}</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>SVG Color Morph (Working Demo)</h4>
                        <p>Smoothly transition between different colors and gradients on SVG elements.</p>
                        <div class="example">
                            <svg id="svgColorDemo" class="w-full h-32" viewBox="0 0 100 100">
                                <circle id="svgColorCircle" cx="50" cy="50" r="30" fill="#a855f7"/>
                            </svg>
                            <div class="text-center mt-4"><button class="interactive-btn" onclick="runSvgColorDemo()">Change Color</button></div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// SVG Color Morph Animation
let colorIndex = 0;
const colors = ['#a855f7', '#ef4444', '#22c55e', '#f59e0b', '#3b82f6'];
function runSvgColorDemo() {
    colorIndex = (colorIndex + 1) % colors.length;
    gsap.to("#svgColorCircle", {
        fill: colors[colorIndex],
        duration: 0.8,
        ease: "power2.inOut"
    });
}</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>SVG Filter Animation</h4>
                        <p>Animate SVG filters like blur, brightness, and drop shadows for dynamic effects.</p>
                        <div class="example">
                            <svg id="svgFilterDemo" class="w-full h-32" viewBox="0 0 100 100">
                                <defs>
                                    <filter id="glowFilter">
                                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                        <feMerge> 
                                            <feMergeNode in="coloredBlur"/>
                                            <feMergeNode in="SourceGraphic"/>
                                        </feMerge>
                                    </filter>
                                </defs>
                                <rect id="svgFilterRect" x="20" y="20" width="60" height="60" fill="#8b5cf6" filter="url(#glowFilter)"/>
                            </svg>
                            <div class="text-center mt-4"><button class="interactive-btn" onclick="runSvgFilterDemo()">Animate Filter</button></div>
                </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// SVG Filter Animation
function runSvgFilterDemo() {
    const filter = document.querySelector('#glowFilter feGaussianBlur');
    gsap.to(filter, {
        attr: { stdDeviation: 8 },
        duration: 1,
        ease: "power2.inOut",
        yoyo: true,
        repeat: 1
    });
}</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>SVG Morphing (Working Demo)</h4>
                        <p>Smoothly morph between different SVG shapes using path interpolation.</p>
                        <div class="example">
                            <svg id="svgMorphDemo" class="w-full h-32" viewBox="0 0 100 100">
                                <path id="svgMorphShape" d="M50,20 A30,30 0 1,1 49.9,20 Z" fill="#a855f7"/>
                            </svg>
                            <div class="text-center mt-4"><button class="interactive-btn" onclick="runSvgMorphDemo()">Morph Shape</button></div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// SVG Morphing Animation
let isCircle = true;
function runSvgMorphDemo() {
    const circle = "M50,20 A30,30 0 1,1 49.9,20 Z";
    const star = "M50,20 L65,65 L20,35 L80,35 L35,65 Z";
    const triangle = "M50,20 L80,80 L20,80 Z";
    
    const shapes = [circle, star, triangle];
    const currentShape = isCircle ? 0 : (isCircle === false ? 1 : 2);
    const nextShape = (currentShape + 1) % shapes.length;
    
    gsap.to("#svgMorphShape", {
        attr: { d: shapes[nextShape] },
        duration: 1.2,
        ease: 'power2.inOut'
    });
    
    isCircle = nextShape === 0;
}</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Performance">
                <h2>🚀 Performance Deep Dive & Pro Workflow</h2>
                <p>Writing great animations isn't just about making things move, it's about writing clean, maintainable, and high-performance code.</p>
                <div class="grid">
                    <div class="card"><h4>Performance: What to Animate</h4><p>For the smoothest animations, stick to animating properties that don't trigger browser layout recalculations. The best are: <strong>`transform`</strong> (x, y, scale, rotation) and <strong>`opacity`</strong>. Animating `width`, `height`, `margin`, or `top`/`left` is much less performant.</p></div>
                    <div class="card"><h4>`will-change` Property</h4><p>You can hint to the browser that an element will be animated by using `will-change: transform, opacity;` in your CSS. This can move the element to its own compositor layer. **Warning:** Do not overuse it! Applying it to too many elements can consume excess memory and harm performance.</p></div>
                </div>
                <h3>Pro Pattern: `ScrollTrigger.batch()`</h3>
                <p>When you need to animate hundreds of elements on scroll, a `ScrollTrigger` for each one is inefficient. `ScrollTrigger.batch()` is the high-performance solution. It groups all the elements and uses a single `ScrollTrigger` to check their position, triggering animations only for the batch of elements that enter the viewport.</p>
                <div class="example">
                    <p>Scroll down to see the cards animate in efficiently.</p>
                    <div id="batchGrid" class="mt-4"></div>
                    <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-js">// This is the core logic for the batch animation
const batchCards = gsap.utils.toArray("#batchGrid .card");
ScrollTrigger.batch(batchCards, {
    // The trigger starts when the top of a batch element hits 85% down the viewport
    start: "top 85%",
    // We only want the animation to play on enter, not on leave, enterBack, or leaveBack
    onEnter: batch => {
        // Animate the batch of elements that just entered
        gsap.to(batch, {
            opacity: 1,
            scale: 1,
            stagger: 0.1, // A small delay between each card in the batch
            duration: 0.8,
            ease: "power2.out",
            overwrite: true // Important to prevent conflicts
        });
    },
    // When the batch leaves the viewport scrolling up, reset them
    onLeaveBack: batch => {
        gsap.set(batch, { opacity: 0, scale: 0.5, overwrite: true });
    }
});</code></pre></div>
                </div>
            </div>

            <div class="section" data-topic="GSAP: Frameworks">
                <h2>🛠️ GSAP in Modern Frameworks</h2>
                <p>Integrating GSAP into frameworks like React and Vue is powerful. The key is to respect the component lifecycle for proper creation and cleanup of animations.</p>
                <div class="grid">
                    <div class="card">
                        <h4>React: The `useGSAP` Hook</h4>
                        <p>The official `@gsap/react` package provides the `useGSAP` hook, which is the recommended way to use GSAP in React. It automatically handles cleanup, making your code cleaner and safer.</p>
                        <div class="code-block"><pre><code class="language-jsx">// 1. Install: npm install gsap @gsap/react
import { useRef } from "react";
import { useGSAP } from "@gsap/react";
import gsap from "gsap"; // Don't forget to import gsap and plugins!

function MyComponent() {
  const container = useRef(null);
  const { contextSafe } = useGSAP({ scope: container });

  // useGSAP handles cleanup automatically!
  useGSAP(() => {
    gsap.from(".box", { opacity: 0, y: 50, stagger: 0.2 });
  }, { scope: container });

  const onButtonClick = contextSafe(() => {
    // This function is also "context-aware" for cleanup
    gsap.to(".box", { rotation: "+=360" });
  });

  return (
          &lt;div ref={container}&gt;
        &lt;div className="box"&gt;1&lt;/div&gt;
        &lt;div className="box"&gt;2&lt;/div&gt;
        &lt;button onClick={onButtonClick}&gt;Animate&lt;/button&gt;
      &lt;/div&gt;
  );
}</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Vue: Lifecycle Hooks</h4>
                        <p>In Vue, use the `onMounted` hook to create your animations and the `onUnmounted` hook to clean them up. `gsap.context()` is the perfect tool for this.</p>
                        <div class="code-block"><pre><code class="language-js"><script setup>
import { onMounted, onUnmounted, ref } from 'vue';
import gsap from 'gsap';

const main = ref();
let ctx;

onMounted(() => {
  ctx = gsap.context((self) => {
    const boxes = self.selector('.box');
    gsap.to(boxes, {
      x: 200,
      stagger: 0.2,
      repeat: -1,
      yoyo: true
    });
  }, main.value); // Scope the context to the component's root element
});

onUnmounted(() => {
  ctx.revert(); // <-- CLEANUP!
});
</script>

<template>
  <div ref="main">
    <div class="box">1</div>
    <div class="box">2</div>
  </div>
</template></code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Framer Motion">
                <h2>⚛️ Framer Motion: Interactive Demos</h2>
                <p>Experience 6 powerful Framer Motion patterns through interactive demos. These showcase real-world animation techniques used in modern web applications.</p>
                
                <h3>Demo 1: Animated Typing Effect</h3>
                <div class="example">
                    <h4>Typewriter Animation with Cursor</h4>
                    <p>Create engaging typewriter effects with blinking cursor, perfect for hero sections and loading states.</p>
                    <div id="framerTextDemo" class="text-4xl font-bold text-center bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent min-h-24 flex items-center justify-center p-8">
                        <span id="typingText"></span><span id="typingCursor" class="animate-pulse">|</span>
                    </div>
                    <div class="text-center mt-4">
                        <button class="interactive-btn" onclick="startTypingDemo()">🚀 Start Typing</button>
                        <button class="interactive-btn" onclick="clearTypingDemo()">🗑️ Clear Text</button>
                        <button class="interactive-btn" onclick="typeFaster()">⚡ Speed Up</button>
                    </div>
                    <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-jsx">import { motion, useAnimation } from "framer-motion";
import { useState, useEffect } from "react";

export const TypewriterText = () => {
  const [text, setText] = useState("");
  const [isTyping, setIsTyping] = useState(false);
  const fullText = "Framer Motion is Powerful";
  
  useEffect(() => {
    if (isTyping && text.length < fullText.length) {
      const timer = setTimeout(() => {
        setText(fullText.slice(0, text.length + 1));
      }, 100);
      return () => clearTimeout(timer);
    }
  }, [text, isTyping, fullText]);

  const startTyping = () => {
    setText("");
    setIsTyping(true);
  };

  return (
    &lt;div className="text-3xl font-bold text-center"&gt;
      &lt;motion.span
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ duration: 0.5 }}
      &gt;
        {text}
      &lt;/motion.span&gt;
      &lt;motion.span
        animate={{ opacity: [1, 0, 1] }}
        transition={{ duration: 1, repeat: Infinity }}
        className="ml-1"
      &gt;
        |
      &lt;/motion.span&gt;
    &lt;/div&gt;
  );
};</code></pre></div>
                </div>

                <h3>Demo 2: Interactive Card with Hover Effects</h3>
                <div class="example">
                    <h4>3D Card with Dynamic Shine</h4>
                    <p>Advanced hover interactions with 3D transforms, dynamic lighting effects, and smooth transitions.</p>
                    <div id="framerCardDemo" class="w-80 h-56 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 text-white flex items-center justify-center font-bold text-3xl relative overflow-hidden cursor-pointer mx-auto shadow-lg">
                        <span>Hover Me</span>
                        <div id="framerCardShine" class="absolute top-0 left-0 w-full h-full opacity-0" style="background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0) 50%);"></div>
                        <div id="framerCardGlow" class="absolute inset-0 rounded-xl opacity-0" style="box-shadow: 0 0 30px rgba(139, 92, 246, 0.5);"></div>
                    </div>
                    <div class="text-center mt-4">
                        <button class="interactive-btn" onclick="resetFramerCard()">Reset Card</button>
                    </div>
                    <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-jsx">import { motion, useMotionValue, useTransform } from "framer-motion";

export const InteractiveCard = () => {
  const mouseX = useMotionValue(0);
  const mouseY = useMotionValue(0);

  const rotateX = useTransform(mouseY, [-200, 200], [15, -15]);
  const rotateY = useTransform(mouseX, [-200, 200], [-15, 15]);
  const gradientX = useTransform(mouseX, [0, 300], ["0%", "100%"]);
  const gradientY = useTransform(mouseY, [0, 200], ["0%", "100%"]);

  return (
    &lt;motion.div
      className="card-container"
      onMouseMove={(e) => {
        mouseX.set(e.nativeEvent.offsetX);
        mouseY.set(e.nativeEvent.offsetY);
      }}
      whileHover={{ scale: 1.05 }}
      whileTap={{ scale: 0.95 }}
      style={{ rotateX, rotateY, transformStyle: "preserve-3d" }}
    &gt;
      &lt;motion.div
        className="shine"
        style={{
          background: `radial-gradient(circle at ${gradientX} ${gradientY}, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0) 50%)`
        }}
      /&gt;
    &lt;/motion.div&gt;
  );
};</code></pre></div>
                </div>

                <h3>Demo 3: AnimatePresence with List Management</h3>
                <div class="example">
                    <h4>Dynamic List with Enter/Exit Animations</h4>
                    <p>Add and remove items with smooth enter/exit animations, perfect for todo lists, notifications, and dynamic content.</p>
                    <div id="framerPresenceContainer" class="flex flex-col items-center gap-4 min-h-48 bg-gray-50 rounded-lg p-8"></div>
                    <div class="text-center mt-4">
                        <button class="interactive-btn" onclick="addFramerPresenceItem()">➕ Add Item</button>
                        <button class="interactive-btn" onclick="removeFramerPresenceItem()">➖ Remove Item</button>
                        <button class="interactive-btn" onclick="clearFramerPresenceItems()">🗑️ Clear All</button>
                    </div>
                    <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-jsx">import { useState } from "react";
import { motion, AnimatePresence } from "framer-motion";

export const ItemList = () => {
  const [items, setItems] = useState([1, 2, 3]);

  const addItem = () => {
    setItems(prev => [...prev, Math.max(...prev) + 1]);
  };

  const removeItem = () => {
    setItems(prev => prev.slice(0, -1));
  };

  return (
    &lt;div&gt;
      &lt;AnimatePresence mode="popLayout"&gt;
        {items.map((item) => (
          &lt;motion.div
            key={item}
            initial={{ opacity: 0, x: -100, scale: 0.8 }}
            animate={{ opacity: 1, x: 0, scale: 1 }}
            exit={{ opacity: 0, x: 100, scale: 0.8 }}
            transition={{ 
              type: "spring", 
              stiffness: 300, 
              damping: 30 
            }}
            className="item"
          &gt;
            Item {item}
          &lt;/motion.div&gt;
        ))}
      &lt;/AnimatePresence&gt;
    &lt;/div&gt;
  );
};</code></pre></div>
                </div>

                <h3>Demo 4: Interactive Card Stack</h3>
                <div class="example">
                    <h4>Card Stack with Hover Effects</h4>
                    <p>Interactive card stack with smooth hover animations, perfect for showcasing multiple items or features.</p>
                    <div id="framerCardStack" class="relative w-80 h-56 mx-auto">
                        <div class="card-stack-item absolute w-full h-full bg-gradient-to-br from-red-500 to-red-600 rounded-lg shadow-lg cursor-pointer transform transition-all duration-300 hover:scale-105" style="z-index: 1;">
                            <div class="flex items-center justify-center h-full text-white font-bold text-lg">
                                🎨 Design
                            </div>
                        </div>
                        <div class="card-stack-item absolute w-full h-full bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow-lg cursor-pointer transform transition-all duration-300 hover:scale-105" style="z-index: 2; top: -8px; left: 8px;">
                            <div class="flex items-center justify-center h-full text-white font-bold text-lg">
                                ⚡ Development
                            </div>
                        </div>
                        <div class="card-stack-item absolute w-full h-full bg-gradient-to-br from-green-500 to-green-600 rounded-lg shadow-lg cursor-pointer transform transition-all duration-300 hover:scale-105" style="z-index: 3; top: -16px; left: 16px;">
                            <div class="flex items-center justify-center h-full text-white font-bold text-lg">
                                🚀 Launch
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <button class="interactive-btn" onclick="runCardStackDemo()">🔄 Shuffle Cards</button>
                        <button class="interactive-btn" onclick="resetCardStackDemo()">🔄 Reset Stack</button>
                    </div>
                    <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-jsx">import { motion } from "framer-motion";

export const CardStack = () => {
  const cards = [
    { id: 1, title: "Design", color: "from-red-500 to-red-600" },
    { id: 2, title: "Development", color: "from-blue-500 to-blue-600" },
    { id: 3, title: "Launch", color: "from-green-500 to-green-600" }
  ];

  return (
    &lt;div className="relative w-64 h-40"&gt;
      {cards.map((card, index) => (
        &lt;motion.div
          key={card.id}
          className={`absolute w-full h-full bg-gradient-to-br ${card.color} 
                     rounded-lg shadow-lg cursor-pointer`}
          style={{ 
            zIndex: cards.length - index,
            top: -index * 8,
            left: index * 8
          }}
          whileHover={{ 
            scale: 1.05,
            y: -10,
            zIndex: 10
          }}
          transition={{ duration: 0.3 }}
        &gt;
          &lt;div className="flex items-center justify-center h-full text-white font-bold"&gt;
            {card.title}
          &lt;/div&gt;
        &lt;/motion.div&gt;
      ))}
    &lt;/div&gt;
  );
};</code></pre></div>
                </div>



                <h3>Demo 6: Progress Bar with Spring Physics</h3>
                <div class="example">
                    <h4>Animated Progress with Realistic Physics</h4>
                    <p>Create smooth progress bars with spring physics, perfect for loading states, form completion, and data visualization.</p>
                    <div id="framerProgressDemo" class="space-y-6">
                        <div class="w-full bg-gray-200 rounded-full h-6 overflow-hidden shadow-inner">
                            <div id="framerProgressBar" class="h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full transition-all duration-300 shadow-lg" style="width: 0%"></div>
                        </div>
                        <div class="flex justify-between text-sm text-gray-600">
                            <span id="framerProgressText">0%</span>
                            <span>Loading...</span>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <button class="interactive-btn" onclick="startFramerProgress()">🚀 Start Progress</button>
                        <button class="interactive-btn" onclick="resetFramerProgress()">🔄 Reset</button>
                        <button class="interactive-btn" onclick="setFramerProgress(50)">50%</button>
                        <button class="interactive-btn" onclick="setFramerProgress(100)">100%</button>
                    </div>
                    <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-jsx">import { motion, AnimateSharedLayout } from "framer-motion";

export const LayoutDemo = () => {
  const [selectedId, setSelectedId] = useState(null);

  return (
    &lt;AnimateSharedLayout&gt;
      {items.map(item => (
        &lt;motion.div 
          key={item.id} 
          layoutId={item.id} 
          onClick={() => setSelectedId(item.id)}
        &gt;
          {item.label}
        &lt;/motion.div&gt;
      ))}
      {selectedId && (
        &lt;motion.div layoutId={selectedId} className="modal"&gt;
          &lt;button onClick={() => setSelectedId(null)}&gt;Close&lt;/button&gt;
        &lt;/motion.div&gt;
      )}
    &lt;/AnimateSharedLayout&gt;
  );
};</code></pre></div>
                </div>

                <h3>Gesture-Driven Animation</h3>
                <div class="example">
                    <h4>Drag to Reorder</h4>
                    <p>Create draggable lists with smooth reordering animations using Framer Motion's drag capabilities.</p>
                    <div id="framerDragDemo" class="flex flex-col gap-2">
                        <div class="drag-item bg-red-500 p-3 rounded text-white cursor-grab">Drag Item 1</div>
                        <div class="drag-item bg-blue-500 p-3 rounded text-white cursor-grab">Drag Item 2</div>
                        <div class="drag-item bg-green-500 p-3 rounded text-white cursor-grab">Drag Item 3</div>
                    </div>
                    <div class="text-center mt-4">
                        <button class="interactive-btn" onclick="runFramerDragDemo()">Shuffle Items</button>
                    </div>
                    <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-jsx">import { motion, Reorder } from "framer-motion";

export const DragList = () => {
  const [items, setItems] = useState(["Item 1", "Item 2", "Item 3"]);

  return (
    &lt;Reorder.Group axis="y" values={items} onReorder={setItems}&gt;
      {items.map((item) => (
        &lt;Reorder.Item key={item} value={item}&gt;
          &lt;motion.div
            whileDrag={{ scale: 1.05, boxShadow: "0 10px 20px rgba(0,0,0,0.2)" }}
            className="drag-item"
          &gt;
            {item}
          &lt;/motion.div&gt;
        &lt;/Reorder.Item&gt;
      ))}
    &lt;/Reorder.Group&gt;
  );
};</code></pre></div>
                </div>


            </div>

            <div class="section" data-topic="Codegrid Effects">
                <h2>🎬 Codegrid Masterclass: Deconstructing Pro Effects</h2>
                <p>This section breaks down popular, high-end animation effects seen on award-winning sites, showing how they are built step-by-step with GSAP, inspired by tutorials from channels like Codegrid.</p>
                
                <h3>Recipe 1: The Magnetic Button Effect</h3>
                <p>An element that "pulls" the custom cursor towards it on hover, creating a magnetic, sticky feel. This effect adds a delightful, premium touch to interactive elements.</p>
                <div class="example text-center">
                    <div id="magnetic-button-container" class="relative inline-block">
                        <div id="magnetic-button">Hover Me</div>
                    </div>
                </div>
                <h4>Deconstruction</h4>
                <div class="grid">
                    <div class="card"><h5>1. HTML/CSS Setup</h5><p>Create the button and a separate `div` for the custom cursor. The cursor is `position: fixed` and has `pointer-events: none` so it doesn't interfere with mouse events.</p></div>
                    <div class="card"><h5>2. Mouse Tracking</h5><p>A global `mousemove` event listener updates the position of our custom cursor dot on every frame using `gsap.set()` for performance.</p></div>
                    <div class="card"><h5>3. The `quickTo` Logic</h5><p>We use `gsap.quickTo()` for hyper-performant animation of the `x` and `y` properties of both the button and the cursor. This is much faster than creating a new `gsap.to()` tween on every mouse move.</p></div>
                    <div class="card"><h5>4. The Math</h5><p>On `mousemove` over the button, we calculate the distance between the mouse and the button's center. We then tell GSAP to move the button a *fraction* of that distance (e.g., 20%) towards the mouse. This creates the smooth, magnetic pull instead of an instant snap.</p></div>
                </div>
                <button class="demo-code-toggle">Show Code</button>
                <div class="demo-code-block"><pre><code class="language-js">// See the main script for the full implementation
const button = document.getElementById('magnetic-button');
const cursor = document.getElementById('magnetic-cursor');

// Create high-performance functions to move the button
const btnXTo = gsap.quickTo(button, "x", { duration: 0.4, ease: "power3" });
const btnYTo = gsap.quickTo(button, "y", { duration: 0.4, ease: "power3" });

// On mouse move over the button...
button.addEventListener('mousemove', (e) => {
    const { clientX, clientY } = e;
    const { height, width, left, top } = button.getBoundingClientRect();
    const x = clientX - (left + width / 2);
    const y = clientY - (top + height / 2);
    btnXTo(x * 0.3); // Move 30% of the distance
    btnYTo(y * 0.3);
});

// On mouse leave, snap back to center
button.addEventListener('mouseleave', () => {
    btnXTo(0);
    btnYTo(0);
});</code></pre></div>
            </div>

            <div class="section" data-topic="Codegrid Effects">
                <h3>Recipe 2: The Infinite Marquee Scroll</h3>
                <p>A seamless, infinitely looping horizontal scroll of text or images, a staple of modern web design. This version even speeds up and slows down based on your scroll direction.</p>
                <div class="example">
                    <div class="marquee-wrapper"><div id="marquee1" class="marquee"></div></div>
                    <div class="marquee-wrapper"><div id="marquee2" class="marquee"></div></div>
                </div>
                <h4>Deconstruction</h4>
                <div class="grid">
                    <div class="card"><h5>1. The HTML Trick</h5><p>The core of the effect is content duplication. If your content is `[A, B, C]`, your HTML must contain `[A, B, C, A, B, C]`. This allows the animation to loop back to the start without a visible jump.</p></div>
                    <div class="card"><h5>2. The GSAP Timeline</h5><p>A simple repeating timeline animates the `xPercent` property from `0` to `-100`. This moves the entire container exactly one "set" of content to the left.</p></div>
                    <div class="card"><h5>3. The Seamless Loop</h5><p>We use `gsap.utils.wrap()` to create the seamless loop. This utility function is perfect for this. When the animation reaches the end, `wrap` instantly snaps it back to the beginning, but because the content is duplicated, the user sees a continuous flow.</p></div>
                    <div class="card"><h5>4. Scroll-Based Speed</h5><p>This is the advanced part. A `ScrollTrigger` watches the page scroll. When the user scrolls down, we animate the timeline's `timeScale` to a higher value (e.g., 3) to speed it up. When they scroll up, we slow it down. This creates a dynamic, interactive feel.</p></div>
                </div>
                <button class="demo-code-toggle">Show Code</button>
                <div class="demo-code-block"><pre><code class="language-js">function createMarquee(selector, speed, direction = 1) {
    const row = document.querySelector(selector);
    const spans = Array.from(row.children);
    // Duplicate the content for seamless looping
    spans.forEach(span => row.appendChild(span.cloneNode(true)));

    const wrap = gsap.utils.wrap(0, row.scrollWidth / 2);

    const tl = gsap.timeline({
        repeat: -1,
        onUpdate() {
            // Manually wrap the progress to ensure it's seamless
            this.progress(wrap(this.progress()));
        }
    });

    tl.to(row, {
        x: direction > 0 ? `-=${row.scrollWidth / 2}` : `+=${row.scrollWidth / 2}`,
        duration: speed,
        ease: 'none'
    });

    // Speed up/slow down on scroll
    ScrollTrigger.create({
        trigger: "body",
        start: "top top",
        end: "bottom bottom",
        onUpdate: self => {
            gsap.to(tl, { timeScale: Math.abs(self.getVelocity() / 200) + 1, duration: 0.2 });
        }
    });
}</code></pre></div>
            </div>

            <div class="section" data-topic="GSAP: Core">
                <h2>🃏 GSAP: Cheat Cards & Common Patterns</h2>
                <div class="grid">
                    <div class="card"><h4>Infinite Loop</h4><p>Loop an animation endlessly, with optional `yoyo` for back-and-forth motion.</p><div class="code-block"><pre><code>gsap.to('.loop', { x: 100, repeat: -1, yoyo: true });</code></pre></div></div>
                    <div class="card">
                        <h4>Staggered Entrance (Live Demo)</h4>
                        <p>Animate a group of elements in sequence. Adjust the sliders to see how `stagger` and `duration` affect the feel.</p>
                        <div class="example">
                            <div id="staggerDemoGrid"><div></div><div></div><div></div><div></div><div></div><div></div></div>
                            <div class="live-controls">
                                <div><label for="staggerAmount">Stagger:</label><input type="range" id="staggerAmount" value="0.1" step="0.05" min="0" max="1"></div>
                                <div><label for="staggerDuration">Duration:</label><input type="range" id="staggerDuration" value="0.5" step="0.1" min="0.1" max="2"></div>
                            </div>
                            <div class="text-center mt-2"><button class="interactive-btn" onclick="runStaggerDemo()">Replay</button></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="WAAPI/CSS">
                <h2>🎨 WAAPI & CSS Animations</h2>
                <p>For simpler, declarative animations, the browser's native technologies are excellent, lightweight choices.</p>
                <div class="grid">
                    <div class="card"><h4>Web Animations API (WAAPI)</h4><p>A native browser API for creating animations in JavaScript without an external library. Good for performance and simple sequences.</p><div class="code-block"><pre><code class="language-js">element.animate([
  { transform: 'scale(1)', opacity: 1 },
  { transform: 'scale(0.5)', opacity: 0 }
], {
  duration: 1000,
  easing: 'ease-in-out'
});</code></pre></div></div>
                    <div class="card"><h4>CSS Transitions & Keyframes</h4><p>The simplest way to handle state changes (like hover) and basic, self-contained animations.</p><div class="code-block"><pre><code class="language-css">.box {
  transition: transform 0.3s ease-out;
}
.box:hover {
  transform: scale(1.1);
}
.animated {
  animation: slide-in 1s forwards;
}
@keyframes slide-in {
  from { transform: translateX(-100%); }
  to { transform: translateX(0); }
}</code></pre></div></div>
                </div>
            </div>

            <div class="section" data-topic="Introduction">
                <h2>📈 What to Learn Next</h2>
                <div class="card">
                    <h4>Recommended Resources</h4>
                    <ul>
                        <li><a href="https://gsap.com/docs/v3/" target="_blank" rel="noopener">GSAP Official Docs</a> - The ultimate source of truth.</li>
                        <li><a href="https://gsap.com/community/forums/" target="_blank" rel="noopener">GSAP Community Forums</a> - The best place to get help from experts and the GSAP team.</li>
                        <li><a href="https://gsap.com/resources/ease-visualizer/" target="_blank" rel="noopener">GSAP Ease Visualizer</a> - An interactive tool to help you choose the perfect ease.</li>
                        <li><a href="https://www.framer.com/motion/introduction/" target="_blank" rel="noopener">Framer Motion Docs</a> - The official documentation for Framer Motion.</li>
                        <li><a href="https://www.youtube.com/@GreenSockLearning" target="_blank" rel="noopener">GSAP YouTube Channel</a> - Official tutorials and guides.</li>
                        <li><a href="https://www.youtube.com/@CreativeCodingClub" target="_blank" rel="noopener">Creative Coding Club (YouTube)</a> - Excellent, in-depth GSAP tutorials.</li>
                    </ul>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Real-World Recipes">
                <h2>🏆 Real-World Animation Recipes & Case Studies</h2>
                <p>Step-by-step breakdowns of signature effects seen on award-winning sites. Each recipe includes annotated code, a live demo, and best practices for production use.</p>
                <div class="grid">
                    <div class="card">
                        <h4>Hero Section Reveal (Awwwards/Codegrid Style)</h4>
                        <p>This effect animates a hero headline and image with staggered, scroll-triggered reveals, creating a cinematic entrance. Common on high-end agency and portfolio sites.</p>
                        <div class="example">
                            <div id="heroRevealDemo" class="flex flex-col md:flex-row items-center gap-8 p-8 bg-gradient-to-r from-slate-900 to-slate-700 rounded-xl shadow-lg">
                                <div class="flex-1">
                                    <h3 id="heroRevealHeadline" class="text-4xl md:text-5xl font-bold text-white mb-4">Unleash <span class="text-green-400">Stunning</span> Motion</h3>
                                    <p id="heroRevealSub" class="text-lg text-slate-200 mb-6">Bring your web projects to life with scroll-driven, staggered reveals and immersive hero entrances.</p>
                                    <button class="interactive-btn" onclick="runHeroRevealDemo()">Replay Animation</button>
                                </div>
                                <div class="flex-1 flex justify-center">
                                    <img id="heroRevealImg" src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80" alt="Hero Demo" class="rounded-lg shadow-2xl w-64 h-64 object-cover border-4 border-green-400"/>
                                </div>
                            </div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP Hero Reveal Animation
function runHeroRevealDemo() {
    gsap.set(["#heroRevealHeadline", "#heroRevealSub", "#heroRevealImg"], { opacity: 0, y: 60 });
    gsap.to("#heroRevealHeadline", { opacity: 1, y: 0, duration: 1, ease: "power4.out", delay: 0.1 });
    gsap.to("#heroRevealSub", { opacity: 1, y: 0, duration: 1, ease: "power4.out", delay: 0.4 });
    gsap.to("#heroRevealImg", { opacity: 1, y: 0, duration: 1.2, ease: "power3.out", delay: 0.7 });
}
// Optionally, trigger on scroll with ScrollTrigger:
// ScrollTrigger.create({
//   trigger: "#heroRevealDemo",
//   start: "top 80%",
//   once: true,
//   onEnter: runHeroRevealDemo
// });
</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Scroll Animations">
                <h2>🌀 Smooth Scroll Animations</h2>
                <p>Create engaging scroll-triggered animations that enhance user experience without causing performance issues.</p>
                    <div class="card">
                    <h4>Staggered Card Reveal</h4>
                        <p>Cards animate in with a staggered effect as they enter the viewport, perfect for portfolios and galleries.</p>
                        <div class="example">
                            <div id="staggeredCardsDemo" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <div class="stagger-card h-32 bg-gradient-to-br from-green-400 to-green-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg opacity-0 transform translate-y-8">Card 1</div>
                                <div class="stagger-card h-32 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg opacity-0 transform translate-y-8">Card 2</div>
                                <div class="stagger-card h-32 bg-gradient-to-br from-purple-400 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg opacity-0 transform translate-y-8">Card 3</div>
                                <div class="stagger-card h-32 bg-gradient-to-br from-pink-400 to-pink-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg opacity-0 transform translate-y-8">Card 4</div>
                                <div class="stagger-card h-32 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg opacity-0 transform translate-y-8">Card 5</div>
                                <div class="stagger-card h-32 bg-gradient-to-br from-red-400 to-red-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg opacity-0 transform translate-y-8">Card 6</div>
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <button class="interactive-btn" onclick="runStaggeredCardsDemo()">🔄 Replay Animation</button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP Staggered Cards Animation
function runStaggeredCardsDemo() {
    const cards = document.querySelectorAll('.stagger-card');
    
    // Reset cards
    gsap.set(cards, { opacity: 0, y: 50 });
    
    // Animate cards in with stagger
    gsap.to(cards, {
        opacity: 1,
        y: 0,
        duration: 0.8,
        stagger: 0.1,
        ease: 'power2.out',
        scrollTrigger: {
            trigger: '#staggeredCardsDemo',
            start: 'top 80%',
            end: 'bottom 20%',
            toggleActions: 'play none none reverse'
        }
    });
}

// Initialize on page load
runStaggeredCardsDemo();
</code></pre></div>
                    </div>
            </div>

            <div class="section" data-topic="Performance">
                <h2>⚡ Scroll Animation Performance Optimization</h2>
                <p>Master the art of creating smooth, performant scroll animations that don't impact user experience.</p>
                <div class="grid">
                    <div class="card">
                        <h4>Performance Best Practices</h4>
                        <ul>
                            <li>Use <code>scrub</code> for scroll-linked progress, but avoid excessive DOM updates.</li>
                            <li>Batch animations with <code>ScrollTrigger.batch()</code> for large lists.</li>
                            <li>Animate <code>transform</code> and <code>opacity</code> for best GPU performance.</li>
                            <li>Profile with Chrome DevTools' Performance tab to spot jank.</li>
                            <li>Use <code>will-change: transform, opacity</code> sparingly for critical elements.</li>
                            <li>Limit the number of active ScrollTriggers on mobile devices.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Memory Management</h4>
                        <ul>
                            <li>Always clean up ScrollTriggers when components unmount.</li>
                            <li>Use <code>ScrollTrigger.killAll()</code> for debugging.</li>
                            <li>Monitor memory usage in DevTools when testing.</li>
                            <li>Consider using <code>ScrollTrigger.refresh()</code> after dynamic content changes.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Mobile Optimization</h4>
                        <ul>
                            <li>Reduce animation complexity on mobile devices.</li>
                            <li>Use <code>ScrollTrigger.batch()</code> for better mobile performance.</li>
                            <li>Test on actual devices, not just desktop browsers.</li>
                            <li>Consider disabling animations on low-end devices.</li>
                        </ul>
                    </div>
                </div>
            </div>



            <div class="section" data-topic="Advanced: 3D Effects">
                <h2>🧊 3D & Perspective Effects</h2>
                <p>Add depth and wow-factor to your site with 3D transforms, perspective, and parallax. These effects are staples of modern, immersive web design.</p>
                <div>
                    <div class="card mb-8">
                        <h4>3D Card Flip (Interactive)</h4>
                        <p>Flip a card in 3D on click or hover. Great for portfolios, testimonials, and interactive UI elements.</p>
                        <div class="example flex justify-center">
                            <div id="cardFlipDemo" class="relative w-64 h-40 cursor-pointer" style="perspective: 1000px;">
                                <div id="cardFlipInner" class="absolute w-full h-full transition-transform duration-700" style="transform-style: preserve-3d;">
                                    <div class="absolute w-full h-full bg-blue-500 text-white flex items-center justify-center text-2xl font-bold rounded-xl shadow-lg" style="backface-visibility: hidden;">Front</div>
                                    <div class="absolute w-full h-full bg-green-400 text-white flex items-center justify-center text-2xl font-bold rounded-xl shadow-lg" style="transform: rotateY(180deg); backface-visibility: hidden;">Back</div>
                                </div>
                            </div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP 3D Card Flip
(function() {
    const card = document.getElementById('cardFlipDemo');
    const inner = document.getElementById('cardFlipInner');
    if (card && inner) {
        let isFlipped = false;
        card.addEventListener('click', () => {
            isFlipped = !isFlipped;
            gsap.to(inner, { rotationY: isFlipped ? 180 : 0, duration: 0.7, ease: 'power2.inOut' });
        });
    }
})();
</code></pre></div>
                    </div>
                    <div class="card mb-8">
                        <h4>Parallax Layers (Scroll-Based)</h4>
                        <p>Simulate depth by moving background and foreground layers at different speeds as you scroll.</p>
                        <div class="example" style="height: 220px; overflow: hidden; position: relative;">
                            <div id="parallaxBg" style="position: absolute; left: 0; top: 0; width: 100%; height: 220px; background: linear-gradient(90deg,#6366f1 60%,#22d3ee 100%); z-index: 1;"></div>
                            <div id="parallaxMid" style="position: absolute; left: 0; top: 40px; width: 100%; height: 120px; background: rgba(255,255,255,0.2); z-index: 2;"></div>
                            <div id="parallaxFg" style="position: absolute; left: 0; top: 100px; width: 100%; height: 60px; background: #fff; border-radius: 30px; z-index: 3; box-shadow: 0 8px 32px rgba(0,0,0,0.2);"></div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP Parallax Layers
function runParallaxDemo() {
    gsap.to('#parallaxBg', {
        y: 60,
        scrollTrigger: { trigger: '#parallaxBg', start: 'top bottom', end: 'bottom top', scrub: true }
    });
    gsap.to('#parallaxMid', {
        y: 30,
        scrollTrigger: { trigger: '#parallaxMid', start: 'top bottom', end: 'bottom top', scrub: true }
    });
    gsap.to('#parallaxFg', {
        y: 0,
        scrollTrigger: { trigger: '#parallaxFg', start: 'top bottom', end: 'bottom top', scrub: true }
    });
}
runParallaxDemo();
</code></pre></div>
                    </div>
                    <div class="card mb-8">
                        <h4>3D Cube Rotation</h4>
                        <p>Rotate a 3D cube on X/Y axes with buttons.</p>
                        <div class="example flex flex-col items-center">
                            <div id="cube3dContainer" class="w-40 h-40 flex items-center justify-center" style="perspective: 800px;">
                                <div id="cube3d" class="relative w-24 h-24" style="transform-style: preserve-3d;">
                                    <div class="absolute w-24 h-24 bg-blue-400 flex items-center justify-center text-white font-bold text-lg" style="transform: rotateY(0deg) translateZ(48px);">Front</div>
                                    <div class="absolute w-24 h-24 bg-green-400 flex items-center justify-center text-white font-bold text-lg" style="transform: rotateY(180deg) translateZ(48px);">Back</div>
                                    <div class="absolute w-24 h-24 bg-yellow-400 flex items-center justify-center text-black font-bold text-lg" style="transform: rotateY(90deg) translateZ(48px);">Right</div>
                                    <div class="absolute w-24 h-24 bg-pink-400 flex items-center justify-center text-white font-bold text-lg" style="transform: rotateY(-90deg) translateZ(48px);">Left</div>
                                    <div class="absolute w-24 h-24 bg-purple-400 flex items-center justify-center text-white font-bold text-lg" style="transform: rotateX(90deg) translateZ(48px);">Top</div>
                                    <div class="absolute w-24 h-24 bg-gray-400 flex items-center justify-center text-white font-bold text-lg" style="transform: rotateX(-90deg) translateZ(48px);">Bottom</div>
                                </div>
                            </div>
                            <div class="flex gap-2 mt-4">
                                <button class="interactive-btn" onclick="rotateCube3d('x', 90)">Rotate X+</button>
                                <button class="interactive-btn" onclick="rotateCube3d('x', -90)">Rotate X-</button>
                                <button class="interactive-btn" onclick="rotateCube3d('y', 90)">Rotate Y+</button>
                                <button class="interactive-btn" onclick="rotateCube3d('y', -90)">Rotate Y-</button>
                            </div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// 3D Cube Rotation
let cube3dX = 0, cube3dY = 0;
function rotateCube3d(axis, deg) {
    if (axis === 'x') cube3dX += deg;
    if (axis === 'y') cube3dY += deg;
    gsap.to('#cube3d', { rotationX: cube3dX, rotationY: cube3dY, duration: 0.7, ease: 'power2.inOut' });
}
</code></pre></div>
                    </div>
                    <div class="card mb-8">
                        <h4>3D Card Stack</h4>
                        <p>Click to bring a card to the front with a 3D stack animation.</p>
                        <div class="example flex flex-col items-center">
                            <div id="cardStack3d" class="relative w-64 h-40" style="perspective: 900px;">
                                <!-- Cards will be rendered here -->
                            </div>
                            <button class="interactive-btn mt-2" onclick="shuffleCardStack3d()">Shuffle Stack</button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// 3D Card Stack
let cardStackOrder = [0,1,2];
function renderCardStack3d() {
    const container = document.getElementById('cardStack3d');
    container.innerHTML = '';
    cardStackOrder.forEach((idx, i) => {
        const card = document.createElement('div');
        card.className = 'absolute w-48 h-32 rounded-xl shadow-lg flex items-center justify-center text-2xl font-bold text-white';
        card.style.background = ['#6366f1','#22d3ee','#f43f5e'][idx];
        card.style.transform = `translateZ(${-i*40}px) translateY(${-i*10}px)`;
        card.style.zIndex = 10-i;
        card.textContent = `Card ${idx+1}`;
        card.onclick = () => {
            cardStackOrder = [idx, ...cardStackOrder.filter(x => x !== idx)];
            renderCardStack3d();
        };
        container.appendChild(card);
    });
}
function shuffleCardStack3d() {
    cardStackOrder = cardStackOrder.sort(() => Math.random() - 0.5);
    renderCardStack3d();
}
renderCardStack3d();
</code></pre></div>
                    </div>
                    <div class="card mb-8">
                        <h4>Parallax Layers with Depth (Mouse Responsive)</h4>
                        <p>Move your mouse or touch to see layers move at different speeds, simulating depth.</p>
                        <div class="example flex flex-col items-center" style="height:220px;">
                            <div id="parallaxDepthContainer" class="relative w-full h-full" style="height:200px;">
                                <div id="parallaxDepthBg" class="absolute w-full h-full rounded-lg" style="background:linear-gradient(90deg,#818cf8 60%,#f472b6 100%);z-index:1;"></div>
                                <div id="parallaxDepthMid" class="absolute w-3/4 h-3/4 left-1/8 top-1/8 rounded-lg bg-white opacity-70" style="z-index:2;"></div>
                                <div id="parallaxDepthFg" class="absolute w-1/2 h-1/2 left-1/4 top-1/4 rounded-lg bg-green-400 opacity-90 flex items-center justify-center text-white font-bold text-lg" style="z-index:3;">FG</div>
                            </div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// Parallax Layers with Depth (Mouse Responsive)
function initParallaxDepthDemo() {
    const container = document.getElementById('parallaxDepthContainer');
    const bg = document.getElementById('parallaxDepthBg');
    const mid = document.getElementById('parallaxDepthMid');
    const fg = document.getElementById('parallaxDepthFg');
    container.addEventListener('mousemove', e => {
        const rect = container.getBoundingClientRect();
        const x = (e.clientX - rect.left) / rect.width - 0.5;
        const y = (e.clientY - rect.top) / rect.height - 0.5;
        gsap.to(bg, { x: x * 30, y: y * 30, duration: 0.4, overwrite: true });
        gsap.to(mid, { x: x * 60, y: y * 60, duration: 0.4, overwrite: true });
        gsap.to(fg, { x: x * 90, y: y * 90, duration: 0.4, overwrite: true });
    });
    container.addEventListener('mouseleave', () => {
        gsap.to([bg, mid, fg], { x: 0, y: 0, duration: 0.5 });
    });
}
initParallaxDepthDemo();
</code></pre></div>
                    </div>
                    <div class="card mb-8">
                        <h4>3D Hover Tilt</h4>
                        <p>Hover over the card to tilt it in 3D based on mouse position.</p>
                        <div class="example flex flex-col items-center">
                            <div id="hoverTilt3d" class="w-48 h-32 bg-indigo-400 rounded-xl shadow-lg flex items-center justify-center text-white text-2xl font-bold" style="transition: box-shadow 0.2s;">Hover Me</div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// 3D Hover Tilt
function initHoverTilt3d() {
    const card = document.getElementById('hoverTilt3d');
    card.addEventListener('mousemove', e => {
        const rect = card.getBoundingClientRect();
        const x = (e.clientX - rect.left) / rect.width - 0.5;
        const y = (e.clientY - rect.top) / rect.height - 0.5;
        gsap.to(card, { rotationY: x * 30, rotationX: -y * 30, duration: 0.3, overwrite: true, boxShadow: '0 8px 32px rgba(0,0,0,0.3)' });
    });
    card.addEventListener('mouseleave', () => {
        gsap.to(card, { rotationY: 0, rotationX: 0, duration: 0.5, boxShadow: '0 5px 15px rgba(0,0,0,0.1)' });
    });
}
initHoverTilt3d();
</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Microinteractions">
                <h2>✨ Microinteractions & UI Feedback</h2>
                <p>Small, delightful animations make interfaces feel polished and responsive. Use microinteractions for buttons, toggles, loaders, and more.</p>
                <div class="grid">
                    <div class="card">
                        <h4>Button Ripple Effect</h4>
                        <p>Add a ripple animation to buttons for instant feedback on click.</p>
                        <div class="example flex justify-center">
                            <button id="rippleBtnDemo" class="interactive-btn relative overflow-hidden">Click Me
                                <span id="rippleCircle" class="absolute rounded-full bg-white opacity-40 pointer-events-none" style="width:0;height:0;left:50%;top:50%;transform:translate(-50%,-50%) scale(1);"></span>
                            </button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP Button Ripple Effect
const btn = document.getElementById('rippleBtnDemo');
const ripple = document.getElementById('rippleCircle');
btn.addEventListener('click', function(e) {
    const rect = btn.getBoundingClientRect();
    const size = Math.max(rect.width, rect.height);
    ripple.style.width = ripple.style.height = size + 'px';
    ripple.style.left = (e.clientX - rect.left) + 'px';
    ripple.style.top = (e.clientY - rect.top) + 'px';
    gsap.fromTo(ripple, { scale: 0, opacity: 0.4 }, { scale: 1.5, opacity: 0, duration: 0.6, ease: 'power1.out', onComplete: () => {
        ripple.style.width = ripple.style.height = 0;
    }});
});
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Animated Toggle Switch</h4>
                        <p>A smooth toggle switch animation for settings and preferences.</p>
                        <div class="example flex justify-center">
                            <div id="toggleDemo" class="w-16 h-8 bg-gray-300 rounded-full flex items-center cursor-pointer relative">
                                <div id="toggleKnob" class="w-7 h-7 bg-white rounded-full shadow absolute left-0.5 top-0.5 transition-all"></div>
                            </div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP Animated Toggle Switch
const toggle = document.getElementById('toggleDemo');
const knob = document.getElementById('toggleKnob');
let toggled = false;
toggle.addEventListener('click', () => {
    toggled = !toggled;
    gsap.to(knob, { x: toggled ? 32 : 0, backgroundColor: toggled ? '#4ade80' : '#fff', duration: 0.3, ease: 'power2.out' });
    gsap.to(toggle, { backgroundColor: toggled ? '#bbf7d0' : '#e5e7eb', duration: 0.3, ease: 'power2.out' });
});
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Bouncy Loader</h4>
                        <p>A playful loader animation for async actions.</p>
                        <div class="example flex justify-center items-center">
                            <div id="loaderDemo" class="flex gap-2">
                                <div class="w-4 h-4 bg-green-400 rounded-full"></div>
                                <div class="w-4 h-4 bg-blue-400 rounded-full"></div>
                                <div class="w-4 h-4 bg-purple-400 rounded-full"></div>
                            </div>
                            <button class="interactive-btn ml-4" onclick="runLoaderDemo()">Replay Loader</button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP Bouncy Loader
function runLoaderDemo() {
    gsap.to('#loaderDemo div', {
        y: -18,
        repeat: 2,
        yoyo: true,
        stagger: 0.12,
        duration: 0.4,
        ease: 'back.inOut(2)'
    });
}
// Call runLoaderDemo() to animate
</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Framer Motion">
                <h2>⚛️ Framer Motion Advanced Patterns</h2>
                <p>Unlock the full power of Framer Motion for React with advanced patterns: shared layout transitions, route/page transitions, and gesture-driven animations.</p>
                <div class="grid">
                    <div class="card">
                        <h4>Shared Layout Transitions</h4>
                        <p>Animate elements smoothly between layouts or routes using <code>layoutId</code>. Great for modals, cards, and shared elements.</p>
                        <div class="code-block"><pre><code class="language-jsx">import { motion, AnimatePresence } from "framer-motion";

export function Gallery({ selectedId, setSelectedId }) {
  const items = [
    { id: 'a', label: 'A' },
    { id: 'b', label: 'B' }
  ];
  return (
    &lt;div&gt;
      {items.map(item => (
        &lt;motion.div key={item.id} layoutId={item.id} onClick={() => setSelectedId(item.id)}&gt;{item.label}&lt;/motion.div&gt;
      ))}
      &lt;AnimatePresence&gt;
        {selectedId ? (
          &lt;motion.div layoutId={selectedId} className="modal"&gt;
            &lt;button onClick={() => setSelectedId(null)}&gt;Close&lt;/button&gt;
          &lt;/motion.div&gt;
        ) : null}
      &lt;/AnimatePresence&gt;
    &lt;/div&gt;
  );
}
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Route/Page Transitions</h4>
                        <p>Animate between pages or routes for a seamless SPA experience. Use <code>AnimatePresence</code> and <code>exit</code> props.</p>
                        <div class="code-block"><pre><code class="language-jsx">import { AnimatePresence, motion } from "framer-motion";

export default function App({ Component, pageProps, router }) {
  return (
    &lt;AnimatePresence mode="wait"&gt;
      &lt;motion.div
        key={router.route}
        initial={{ opacity: 0, y: 40 }}
        animate={{ opacity: 1, y: 0 }}
        exit={{ opacity: 0, y: -40 }}
        transition={{ duration: 0.5 }}
      &gt;
        &lt;Component {...pageProps} /&gt;
      &lt;/motion.div&gt;
    &lt;/AnimatePresence&gt;
  );
}
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Gesture-Driven Animations</h4>
                        <p>Respond to drag, tap, and hover gestures for interactive UIs. Use <code>whileHover</code>, <code>whileTap</code>, and <code>drag</code> props.</p>
                        <div class="code-block"><pre><code class="language-jsx">import { motion } from "framer-motion";

export function DraggableCard() {
  return (
    &lt;motion.div
      drag
      whileHover={{ scale: 1.05 }}
      whileTap={{ scale: 0.95 }}
      dragConstraints={{ left: 0, right: 300, top: 0, bottom: 200 }}
      className="card"
    &gt;
      Drag Me
    &lt;/motion.div&gt;
  );
}
</code></pre></div>
                    </div>
                </div>
                <div class="example mt-6">
                    <p><strong>Note:</strong> Framer Motion is React-only. The above code is for reference and inspiration. For live demos, use a React playground like CodeSandbox or StackBlitz.</p>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Performance">
                <h2>🚀 Performance Optimization Techniques</h2>
                <p>Write smooth, high-performance animations by following best practices and using the right tools. Avoid jank and ensure your site feels snappy on all devices.</p>
                <div class="grid">
                    <div class="card">
                        <h4>Best Practices</h4>
                        <ul>
                            <li>Only animate <code>transform</code> and <code>opacity</code> for GPU acceleration.</li>
                            <li>Batch DOM updates and use <code>ScrollTrigger.batch()</code> for lists.</li>
                            <li>Avoid animating layout properties like <code>top</code>, <code>left</code>, <code>width</code>, <code>height</code>, <code>margin</code>.</li>
                            <li>Use <code>will-change</code> sparingly to hint at upcoming animations.</li>
                            <li>Profile with Chrome DevTools' Performance tab to spot bottlenecks.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Profile Animations with Chrome DevTools</h4>
                        <ol>
                            <li>Open DevTools (F12) and go to the <strong>Performance</strong> tab.</li>
                            <li>Click <strong>Record</strong>, trigger your animation, then stop recording.</li>
                            <li>Look for <span class="highlight">purple</span> (compositor) and <span class="highlight">green</span> (JS) bars. Avoid long <strong>Layout</strong> or <strong>Recalculate Style</strong> events.</li>
                        </ol>
                    </div>
                    <div class="card">
                        <h4>Live Demo: Batched Scroll Animation</h4>
                        <p>Efficiently animate a large list of cards as they enter the viewport using <code>ScrollTrigger.batch()</code>.</p>
                        <div class="example">
                            <div id="perfBatchGrid" class="grid grid-cols-4 gap-2"></div>
                            <button class="interactive-btn mt-2" onclick="runPerfBatchDemo()">Replay Animation</button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP Batched Scroll Animation
function runPerfBatchDemo() {
    const grid = document.getElementById('perfBatchGrid');
    grid.innerHTML = '';
    for (let i = 0; i < 20; i++) {
        const card = document.createElement('div');
        card.className = 'card bg-indigo-500';
        card.style.opacity = 0;
        card.style.transform = 'scale(0.5)';
        grid.appendChild(card);
    }
    ScrollTrigger.batch('#perfBatchGrid .card', {
        start: 'top 85%',
        onEnter: batch => gsap.to(batch, { opacity: 1, scale: 1, stagger: 0.08, duration: 0.7, ease: 'power2.out', overwrite: true }),
        onLeaveBack: batch => gsap.set(batch, { opacity: 0, scale: 0.5, overwrite: true })
    });
}
// Call runPerfBatchDemo() to animate
</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Accessibility">
                <h2>♿ Accessibility (a11y) in Motion</h2>
                <p>Make your animations inclusive by respecting user preferences and ensuring accessibility for all. Good motion is accessible motion!</p>
                <div class="grid">
                    <div class="card">
                        <h4>Best Practices</h4>
                        <ul>
                            <li>Respect <code>prefers-reduced-motion</code> and provide a reduced motion toggle.</li>
                            <li>Keep focus visible and avoid moving focus unexpectedly.</li>
                            <li>Ensure animated content is not essential for understanding or navigation.</li>
                            <li>Use <code>aria-live</code> for dynamic content updates if needed.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Live Demo: Reduced Motion Toggle</h4>
                        <p>Toggle reduced motion to see how animations adapt for users who prefer less motion.</p>
                        <div class="example flex flex-col items-center">
                            <label class="flex items-center gap-2 mb-2">
                                <input type="checkbox" id="reducedMotionToggle" />
                                <span>Reduced Motion</span>
                            </label>
                            <button class="interactive-btn" id="a11yAnimBtn">Animate Me</button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// Reduced Motion Toggle
const reducedMotionToggle = document.getElementById('reducedMotionToggle');
const a11yAnimBtn = document.getElementById('a11yAnimBtn');
let prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
reducedMotionToggle.checked = prefersReduced;
reducedMotionToggle.addEventListener('change', () => {
    prefersReduced = reducedMotionToggle.checked;
});
a11yAnimBtn.addEventListener('click', () => {
    gsap.to(a11yAnimBtn, {
        x: prefersReduced ? 40 : 120,
        scale: prefersReduced ? 1.05 : 1.3,
        duration: prefersReduced ? 0.2 : 1,
        ease: prefersReduced ? 'none' : 'elastic.out(1,0.4)',
        onComplete: () => gsap.to(a11yAnimBtn, { x: 0, scale: 1, duration: 0.3 })
    });
});
</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Easing & Physics">
                <h2>🧮 Custom Easing, Physics, and Interpolations</h2>
                <p>Give your animations personality and realism with custom easings, spring physics, and advanced interpolations.</p>
                
                <h3>Interactive Easing Preview</h3>
                <div class="example">
                    <h4>Easing Curve Comparison</h4>
                    <p>Compare different easing functions and see how they affect animation feel.</p>
                    <div class="flex flex-col items-center">
                        <div class="flex gap-2 mb-4">
                            <button class="interactive-btn" onclick="runEasingDemo('power2.out')">Power2</button>
                            <button class="interactive-btn" onclick="runEasingDemo('back.out(1.7)')">Back</button>
                            <button class="interactive-btn" onclick="runEasingDemo('elastic.out(1,0.3)')">Elastic</button>
                            <button class="interactive-btn" onclick="runEasingDemo('bounce.out')">Bounce</button>
                        </div>
                        <div class="w-full flex justify-center mb-4">
                            <div id="easingBox" class="w-16 h-16 bg-gradient-to-r from-pink-400 to-purple-500 rounded-full shadow-lg"></div>
                        </div>
                        <div class="text-sm text-gray-600 text-center">
                            <span id="currentEase">power2.out</span>
                        </div>
                    </div>
                    <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-js">// GSAP Easing Demo
function runEasingDemo(easeType) {
    const box = document.getElementById('easingBox');
    const easeLabel = document.getElementById('currentEase');
    
    // Update label
    easeLabel.textContent = easeType;
    
    // Reset and animate
    gsap.set(box, { x: 0, scale: 1, rotation: 0 });
    gsap.to(box, {
        x: 320,
        scale: 1.2,
        rotation: 360,
        duration: 1.5,
        ease: easeType,
        overwrite: true,
        onComplete: () => {
            gsap.to(box, { x: 0, scale: 1, rotation: 0, duration: 0.8, ease: 'power2.out' });
        }
    });
}</code></pre></div>
                </div>

                <h3>Spring Physics</h3>
                <div class="example">
                    <h4>Realistic Spring Animations</h4>
                    <p>Create natural, physics-based spring animations with customizable parameters.</p>
                    <div class="flex flex-col items-center">
                        <div class="flex gap-2 mb-4">
                            <button class="interactive-btn" onclick="runSpringDemo('tight')">Tight Spring</button>
                            <button class="interactive-btn" onclick="runSpringDemo('loose')">Loose Spring</button>
                            <button class="interactive-btn" onclick="runSpringDemo('bouncy')">Bouncy Spring</button>
                        </div>
                        <div class="w-full flex justify-center"><div id="springBox" class="w-16 h-16 bg-blue-400 rounded-full shadow-lg"></div></div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-js">// Spring Physics Demo
function runSpringDemo(type) {
    const box = document.getElementById('springBox');
    gsap.set(box, { x: 0, y: 0 });
    
    const configs = {
        tight: { tension: 0.8, friction: 0.3 },
        loose: { tension: 0.2, friction: 0.8 },
        bouncy: { tension: 0.9, friction: 0.1 }
    };
    
    gsap.to(box, {
        x: 320,
        y: 100,
        duration: 2,
        ease: `elastic.out(${configs[type].tension}, ${configs[type].friction})`,
        overwrite: true
    });
}</code></pre></div>
                </div>

                <h3>Custom Bounce Effects</h3>
                <div class="example">
                    <h4>Advanced Bounce Animations</h4>
                    <p>Create custom bounce effects with multiple bounces and decay.</p>
                    <div class="flex flex-col items-center">
                        <div class="flex gap-2 mb-4">
                            <button class="interactive-btn" onclick="runBounceDemo('simple')">Simple Bounce</button>
                            <button class="interactive-btn" onclick="runBounceDemo('multiple')">Multiple Bounces</button>
                            <button class="interactive-btn" onclick="runBounceDemo('decay')">Decay Bounce</button>
                        </div>
                        <div class="w-full flex justify-center"><div id="bounceBox" class="w-16 h-16 bg-green-400 rounded-full shadow-lg"></div></div>
                    </div>
                    <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-js">// Custom Bounce Demo
function runBounceDemo(type) {
    const box = document.getElementById('bounceBox');
    gsap.set(box, { y: 0 });
    
    if (type === 'simple') {
        gsap.to(box, { y: 200, duration: 1, ease: 'bounce.out' });
    } else if (type === 'multiple') {
        const tl = gsap.timeline();
        tl.to(box, { y: 200, duration: 0.5, ease: 'power2.out' })
          .to(box, { y: 0, duration: 0.3, ease: 'bounce.out' })
          .to(box, { y: 100, duration: 0.4, ease: 'power2.out' })
          .to(box, { y: 0, duration: 0.2, ease: 'bounce.out' });
    } else if (type === 'decay') {
        gsap.to(box, { 
            y: 200, 
            duration: 1.5, 
            ease: 'power2.out',
            onUpdate: function() {
                if (this.progress() > 0.5) {
                    this.ease = 'bounce.out';
                }
            }
        });
    }
}</code></pre></div>
                    </div>

                <h3>Inertia and Momentum</h3>
                <div class="example">
                    <h4>Draggable with Inertia</h4>
                    <p>Create draggable elements with realistic inertia and momentum effects.</p>
                    <div class="flex flex-col items-center">
                        <div class="w-full flex justify-center mb-4">
                            <div id="inertiaBox" class="w-20 h-20 bg-purple-400 rounded-lg shadow-lg cursor-grab flex items-center justify-center text-white font-bold">Drag Me</div>
                        </div>
                        <button class="interactive-btn" onclick="initInertiaDemo()">Enable Inertia</button>
                    </div>
                    <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-js">// Inertia Demo
function initInertiaDemo() {
    const box = document.getElementById('inertiaBox');
    if (window.Draggable) {
        Draggable.create(box, {
            type: 'x,y',
            inertia: true,
            bounds: '.example',
            onDrag: function() {
                gsap.set(box, { cursor: 'grabbing' });
            },
            onDragEnd: function() {
                gsap.set(box, { cursor: 'grab' });
            }
        });
    }
}</code></pre></div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Workflow & Handoff">
                <h2>🔄 Animation Workflow & Handoff</h2>
                <p>Efficiently bridge the gap between design and development for world-class motion. Learn how to export, hand off, and collaborate on animations.</p>
                
                <h3>Lottie Integration (Working Demo)</h3>
                <div class="example">
                    <h4>Interactive Lottie-Style Animation</h4>
                    <p>This demo simulates a Lottie animation with full playback controls, speed adjustment, and loop options.</p>
                    <div class="flex flex-col items-center">
                        <div id="lottieContainer" class="w-64 h-64 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center relative overflow-hidden">
                            <div id="lottieAnimation" class="text-center text-white">
                                <div id="lottieIcon" class="w-16 h-16 bg-white bg-opacity-20 rounded-full mx-auto mb-4 flex items-center justify-center">
                                    <div id="lottieHeart" class="w-8 h-8 bg-red-400 rounded-full transform scale-75"></div>
                                </div>
                                <div id="lottieText" class="text-sm font-medium">Loading...</div>
                            </div>
                            <div id="lottieProgress" class="absolute bottom-4 left-4 right-4 h-1 bg-white bg-opacity-30 rounded-full overflow-hidden">
                                <div id="lottieProgressBar" class="h-full bg-white rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="flex flex-wrap gap-2 mt-4">
                            <button class="interactive-btn" onclick="playLottieDemo()">▶️ Play</button>
                            <button class="interactive-btn" onclick="pauseLottieDemo()">⏸️ Pause</button>
                            <button class="interactive-btn" onclick="stopLottieDemo()">⏹️ Stop</button>
                            <button class="interactive-btn" onclick="toggleLottieLoop()">🔄 Loop</button>
                        </div>
                        <div class="flex items-center gap-2 mt-2">
                            <label class="text-sm">Speed:</label>
                            <input type="range" id="lottieSpeed" min="0.1" max="3" step="0.1" value="1" class="w-20" onchange="updateLottieSpeed()">
                            <span id="lottieSpeedValue" class="text-sm">1x</span>
                        </div>
                    </div>
                    <button class="demo-code-toggle">Show Code</button>
                    <div class="demo-code-block"><pre><code class="language-html">&lt;!-- Lottie Web Player Example --&gt;
&lt;lottie-player 
    src="animation.json" 
    background="transparent" 
    speed="1" 
    style="width: 300px; height: 300px;" 
    loop 
    autoplay
&gt;&lt;/lottie-player&gt;

&lt;script&gt;
// JavaScript controls
const player = document.querySelector('lottie-player');
player.addEventListener('ready', () => {
    player.play();
});

function playLottie() {
    player.play();
}

function pauseLottie() {
    player.pause();
}

function setSpeed(speed) {
    player.setSpeed(speed);
}
&lt;/script&gt;</code></pre></div>
                </div>
    autoplay
&gt;&lt;/lottie-player&gt;

&lt;script&gt;
// Lottie Player Controls
const player = document.querySelector('lottie-player');

function playLottieDemo() {
    player.play();
}

function pauseLottieDemo() {
    player.pause();
}

function stopLottieDemo() {
    player.stop();
}
&lt;/script&gt;</code></pre></div>
                </div>

                <h3>Export Workflows</h3>
                <div class="grid">
                    <div class="card">
                        <h4>Figma to Code</h4>
                        <ul>
                            <li><strong>SVG Export:</strong> Export vector assets for use with GSAP or CSS. Clean up unnecessary groups and IDs.</li>
                            <li><strong>Design Tokens:</strong> Use Figma's design tokens for consistent motion values.</li>
                            <li><strong>Prototype Links:</strong> Share interactive prototypes for animation reference.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>After Effects to Web</h4>
                        <ul>
                            <li><strong>Lottie (JSON):</strong> Export animations for web and mobile using the Bodymovin plugin.</li>
                            <li><strong>Video Export:</strong> For complex animations, export as MP4 or WebM.</li>
                            <li><strong>Sprite Sheets:</strong> For frame-based animations, export as sprite sheets.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Collaboration & Handoff</h4>
                        <ul>
                            <li>Document animation specs: durations, easings, delays, triggers, and states.</li>
                            <li>Use design tokens for motion (e.g., <code>--motion-ease</code>, <code>--motion-duration</code>).</li>
                            <li>Share interactive prototypes (Figma, Framer, CodeSandbox) for clarity.</li>
                            <li>Iterate with designers and developers in the loop for pixel-perfect results.</li>
                        </ul>
                    </div>
                </div>

                <h3>Advanced Integration Examples</h3>
                <div class="example">
                    <h4>Lottie with GSAP Integration</h4>
                    <p>Control Lottie animations with GSAP for complex sequences and interactions.</p>
                    <div class="code-block"><pre><code class="language-js">// Lottie + GSAP Integration
import lottie from 'lottie-web';

const animation = lottie.loadAnimation({
    container: document.getElementById('lottie-container'),
    renderer: 'svg',
    loop: false,
    autoplay: false,
    path: 'animation.json'
});

// Control with GSAP
gsap.timeline()
    .to(animation, { currentFrame: 30, duration: 1, ease: 'power2.out' })
    .to(animation, { currentFrame: 60, duration: 1, ease: 'power2.inOut' })
    .to(animation, { currentFrame: 0, duration: 0.5, ease: 'power2.in' });

// Scroll-triggered Lottie
ScrollTrigger.create({
    trigger: '#lottie-container',
    start: 'top center',
    onEnter: () => animation.play(),
    onLeave: () => animation.pause()
});</code></pre></div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Testing & Debugging">
                <h2>🧪 Testing & Debugging Animations</h2>
                <p>Ensure your animations are reliable and maintainable with proper testing and debugging techniques.</p>
                <div class="grid">
                    <div class="card">
                        <h4>Testing Animation States</h4>
                        <ul>
                            <li>For React: Use <a href="https://testing-library.com/docs/react-testing-library/intro/" target="_blank" rel="noopener">React Testing Library</a> to assert animation states and transitions.</li>
                            <li>For GSAP: Use <code>onComplete</code> callbacks and <code>progress()</code> to verify timeline progress in tests.</li>
                            <li>Automate UI tests with <a href="https://www.cypress.io/" target="_blank" rel="noopener">Cypress</a> or <a href="https://playwright.dev/" target="_blank" rel="noopener">Playwright</a> for end-to-end animation checks.</li>
                        </ul>
                        <div class="code-block"><pre><code class="language-js">// Example: Testing GSAP timeline progress
const tl = gsap.timeline({ paused: true });
tl.to('.box', { x: 100, duration: 1 });
tl.progress(0.5); // Set timeline to halfway
expect(tl.progress()).toBeCloseTo(0.5);
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Debugging Timeline Issues</h4>
                        <ul>
                            <li>Use <code>console.log()</code> to inspect timeline progress, state, and callbacks.</li>
                            <li>Leverage GSAP's <a href="https://greensock.com/docs/v3/GSAP/Timeline" target="_blank" rel="noopener">timeline controls</a> (<code>play()</code>, <code>pause()</code>, <code>seek()</code>, <code>progress()</code>).</li>
                            <li>Check for conflicting tweens or overlapping animations with <code>overwrite: true</code>.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Visualization Tools</h4>
                        <ul>
                            <li>Use <a href="https://gsap.com/resources/timelinemax-visualizer/" target="_blank" rel="noopener">GSAP Timeline Visualizer</a> to debug and optimize complex timelines.</li>
                            <li>Profile with browser DevTools to spot performance bottlenecks.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Plugins & Extensibility">
                <h2>🔌 Plugin Authoring & Extensibility</h2>
                <p>Extend GSAP and Framer Motion with your own plugins and hooks for custom effects and reusable logic.</p>
                <div class="grid">
                    <div class="card">
                        <h4>Writing a Custom GSAP Plugin</h4>
                        <p>GSAP plugins let you add new properties or behaviors to the animation engine. Use for custom effects, hardware APIs, or new property types.</p>
                        <div class="code-block"><pre><code class="language-js">// Minimal GSAP Plugin Example
const MyPlugin = {
  name: "myPlugin",
  init(target, value) {
    // Called when tweening begins
    this.target = target;
    this.value = value;
  },
  render(progress) {
    // Called on every frame
    this.target.style.opacity = 1 - progress * this.value;
  }
};
gsap.registerPlugin(MyPlugin);
gsap.to(".box", { myPlugin: 0.5, duration: 1 });</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Custom Framer Motion Hooks</h4>
                        <p>Encapsulate animation logic in reusable React hooks for Framer Motion.</p>
                        <div class="code-block"><pre><code class="language-jsx">import &#123; useEffect &#125; from "react";
import &#123; useAnimation &#125; from "framer-motion";

export function useBounceOnClick(ref) &#123;
  const controls = useAnimation();
  useEffect(() =&gt; &#123;
    const node = ref.current;
    if (!node) return;
    const handleClick = () =&gt; &#123;
      controls.start(&#123; scale: [1, 1.2, 0.95, 1] &#125;);
    &#125;;
    node.addEventListener("click", handleClick);
    return () =&gt; node.removeEventListener("click", handleClick);
  &#125;, [ref, controls]);
  return controls;
&#125;
</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Cutting-Edge APIs">
                <h2>🧬 Cutting-Edge APIs & Techniques</h2>
                <p>Stay ahead of the curve with the latest browser animation APIs and techniques.</p>
                <div class="grid">
                    <div class="card">
                        <h4>View Transitions API</h4>
                        <p>Animate seamless page and state transitions natively in the browser. <a href="https://developer.chrome.com/docs/web-platform/view-transitions/" target="_blank" rel="noopener">Learn more</a>.</p>
                        <div class="code-block"><pre><code class="language-js">// Example: Start a view transition
if (document.startViewTransition) &#123;
  document.startViewTransition(() =&gt; &#123;
    // DOM updates here
  &#125;);
&#125;
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>CSS Houdini</h4>
                        <p>Unlock low-level control over CSS with custom properties and paint worklets. <a href="https://houdini.how/" target="_blank" rel="noopener">Learn more</a>.</p>
                        <div class="code-block"><pre><code class="language-css">/* Example: Custom Paint Worklet */
CSS.paintWorklet.addModule('checkerboard.js');
.box &#123;
  background: paint(checkerboard);
&#125;
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>CSS <code>@property</code></h4>
                        <p>Define animatable custom properties for more flexible CSS animations. <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@property" target="_blank" rel="noopener">Learn more</a>.</p>
                        <div class="code-block"><pre><code class="language-css">@property --my-color &#123;
  syntax: '&lt;color&gt;';
  inherits: false;
  initial-value: #f0f;
&#125;
.box &#123;
  transition: --my-color 0.5s;
  --my-color: #0ff;
&#125;
</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Inspiration">
                <h2>🌟 Inspiration & Community Resources</h2>
                <p>Learn from the best and stay inspired! Explore real-world effects, top community resources, and places to connect with other motion designers.</p>
                <div class="grid">
                    <div class="card">
                        <h4>Awwwards/Codegrid Effect Breakdowns</h4>
                        <ul>
                            <li><a href="https://www.awwwards.com/sites/active-theory" target="_blank" rel="noopener">Active Theory</a> – Immersive scroll and 3D effects (see hero and transitions).</li>
                            <li><a href="https://www.awwwards.com/sites/obys-agency" target="_blank" rel="noopener">Obys Agency</a> – Parallax, text reveals, and playful microinteractions.</li>
                            <li><a href="https://www.youtube.com/watch?v=Q1b6TC5rQ1A" target="_blank" rel="noopener">Codegrid: Magnetic Button</a> – Step-by-step GSAP breakdown.</li>
                            <li><a href="https://www.youtube.com/watch?v=6oFvqLfRnsw" target="_blank" rel="noopener">Codegrid: Scroll-Driven Animation</a> – Advanced scroll effects.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Top Codepens & GitHub Repos</h4>
                        <ul>
                            <li><a href="https://codepen.io/GreenSock" target="_blank" rel="noopener">GreenSock CodePen Collection</a></li>
                            <li><a href="https://codepen.io/collection/nVYWZR" target="_blank" rel="noopener">Awwwards Animation Collection</a></li>
                            <li><a href="https://github.com/greensock/GSAP" target="_blank" rel="noopener">GSAP GitHub</a></li>
                            <li><a href="https://github.com/framer/motion" target="_blank" rel="noopener">Framer Motion GitHub</a></li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Communities & Learning</h4>
                        <ul>
                            <li><a href="https://gsap.com/community/forums/" target="_blank" rel="noopener">GSAP Forums</a></li>
                            <li><a href="https://www.framer.com/community/" target="_blank" rel="noopener">Framer Community</a></li>
                            <li><a href="https://www.awwwards.com/" target="_blank" rel="noopener">Awwwards</a></li>
                            <li><a href="https://www.youtube.com/@Codegrid" target="_blank" rel="noopener">Codegrid YouTube</a></li>
                            <li><a href="https://www.creativecodingclub.com/" target="_blank" rel="noopener">Creative Coding Club</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Reusable Components">
                <h2>🧩 Reusable Animation Components & Patterns</h2>
                <p>Build scalable, maintainable UIs with reusable animation components. Explore interactive demos and best practices for modals, carousels, accordions, and tooltips.</p>
                <div class="grid">
                    <div class="card">
                        <h4>Animated Modal</h4>
                        <p>A reusable modal component with animated entrance and exit.</p>
                        <div class="example flex flex-col items-center">
                            <button class="interactive-btn mb-2" onclick="openModalDemo()">Open Modal</button>
                            <div id="modalDemoOverlay" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50" style="display:none;">
                                <div id="modalDemo" class="bg-white rounded-xl shadow-2xl p-8 w-80 relative">
                                    <button class="absolute top-2 right-2 text-xl" onclick="closeModalDemo()">&times;</button>
                                    <h3 class="text-xl font-bold mb-2">Animated Modal</h3>
                                    <p>This modal animates in and out using GSAP.</p>
                                </div>
                            </div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP Animated Modal
function openModalDemo() {
    const overlay = document.getElementById('modalDemoOverlay');
    const modal = document.getElementById('modalDemo');
    overlay.style.display = 'flex';
    gsap.fromTo(overlay, { opacity: 0 }, { opacity: 1, duration: 0.3, ease: 'power2.out' });
    gsap.fromTo(modal, { y: 80, opacity: 0, scale: 0.8 }, { y: 0, opacity: 1, scale: 1, duration: 0.5, ease: 'back.out(1.7)' });
}
function closeModalDemo() {
    const overlay = document.getElementById('modalDemoOverlay');
    const modal = document.getElementById('modalDemo');
    gsap.to(modal, { y: 80, opacity: 0, scale: 0.8, duration: 0.4, ease: 'power2.in', onComplete: () => {
        gsap.to(overlay, { opacity: 0, duration: 0.2, onComplete: () => {
            overlay.style.display = 'none';
        }});
    }});
}
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Animated Carousel</h4>
                        <p>A simple, reusable carousel with animated slide transitions.</p>
                        <div class="example flex flex-col items-center">
                            <div id="carouselDemo" class="relative w-80 h-40 overflow-hidden rounded-xl bg-slate-200 flex items-center justify-center">
                                <div id="carouselSlides" class="absolute w-full h-full flex transition-transform"></div>
                                <button class="absolute left-2 top-1/2 -translate-y-1/2 bg-white rounded-full shadow px-2" onclick="carouselPrev()">&#8592;</button>
                                <button class="absolute right-2 top-1/2 -translate-y-1/2 bg-white rounded-full shadow px-2" onclick="carouselNext()">&#8594;</button>
                            </div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP Animated Carousel
const carouselSlidesData = [
    { color: '#4ade80', text: 'Slide 1' },
    { color: '#818cf8', text: 'Slide 2' },
    { color: '#f472b6', text: 'Slide 3' }
];
let carouselIndex = 0;
function renderCarousel() {
    const slides = document.getElementById('carouselSlides');
    slides.innerHTML = '';
    carouselSlidesData.forEach((slide, i) => {
        const div = document.createElement('div');
        div.className = 'w-80 h-40 flex items-center justify-center text-2xl font-bold';
        div.style.background = slide.color;
        div.style.position = 'absolute';
        div.style.left = (i * 100) + '%';
        div.textContent = slide.text;
        slides.appendChild(div);
    });
    gsap.set(slides, { x: -carouselIndex * 320 });
}
function carouselPrev() {
    carouselIndex = (carouselIndex - 1 + carouselSlidesData.length) % carouselSlidesData.length;
    gsap.to('#carouselSlides', { x: -carouselIndex * 320, duration: 0.6, ease: 'power2.inOut' });
}
function carouselNext() {
    carouselIndex = (carouselIndex + 1) % carouselSlidesData.length;
    gsap.to('#carouselSlides', { x: -carouselIndex * 320, duration: 0.6, ease: 'power2.inOut' });
}
renderCarousel();
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Accordion</h4>
                        <p>A reusable accordion component with animated expand/collapse.</p>
                        <div class="example flex flex-col items-center">
                            <div id="accordionDemo" class="w-80">
                                <div class="border-b">
                                    <button class="w-full text-left py-3 font-bold" onclick="toggleAccordionDemo()">Toggle Accordion</button>
                                    <div id="accordionPanel" class="overflow-hidden" style="height:0;">
                                        <div class="p-4 bg-slate-100">This panel animates open and closed.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP Accordion
let accordionOpen = false;
function toggleAccordionDemo() {
    const panel = document.getElementById('accordionPanel');
    if (!accordionOpen) {
        gsap.to(panel, { height: panel.scrollHeight, duration: 0.5, ease: 'power2.out', onComplete: () => {
            panel.style.height = 'auto';
        }});
    } else {
        gsap.to(panel, { height: 0, duration: 0.4, ease: 'power2.in' });
    }
    accordionOpen = !accordionOpen;
}
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Tooltip</h4>
                        <p>A reusable tooltip with animated fade and slide.</p>
                        <div class="example flex flex-col items-center">
                            <button id="tooltipTarget" class="interactive-btn">Hover Me</button>
                            <div id="tooltipDemo" class="absolute bg-black text-white text-sm rounded px-3 py-1 shadow-lg" style="opacity:0;pointer-events:none;top:0;left:0;">Tooltip content</div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP Tooltip
const tooltipTarget = document.getElementById('tooltipTarget');
const tooltipDemo = document.getElementById('tooltipDemo');
tooltipTarget.addEventListener('mouseenter', e => {
    const rect = tooltipTarget.getBoundingClientRect();
    tooltipDemo.style.left = rect.left + rect.width / 2 - 60 + 'px';
    tooltipDemo.style.top = rect.top - 40 + window.scrollY + 'px';
    gsap.to(tooltipDemo, { opacity: 1, y: -10, duration: 0.3, pointerEvents: 'auto' });
});
tooltipTarget.addEventListener('mouseleave', () => {
    gsap.to(tooltipDemo, { opacity: 0, y: 0, duration: 0.2, pointerEvents: 'none' });
});
</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Mobile & Touch">
                <h2>📱 Mobile & Touch Interactions</h2>
                <p>Deliver delightful, performant motion on mobile devices with touch gestures, responsive layouts, and mobile-first best practices.</p>
                <div class="grid">
                    <div class="card">
                        <h4>Draggable Card (Touch & Mouse)</h4>
                        <p>Make elements draggable with inertia for natural touch and mouse interactions.</p>
                        <div class="example flex flex-col items-center">
                            <div id="draggableContainer" class="relative w-40 h-40 flex items-center justify-center mb-4 border-2 border-green-400 bg-slate-100" style="overflow:hidden;">
                                <div id="draggableTouchDemo" class="w-32 h-32 bg-blue-400 rounded-xl flex items-center justify-center text-white text-xl font-bold shadow-lg cursor-grab select-none">Drag Me</div>
                            </div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP Draggable Card
function initDraggableTouchDemo() {
    if (window.Draggable) {
        Draggable.create('#draggableTouchDemo', {
            type: 'x,y',
            inertia: true,
            edgeResistance: 0.7,
            bounds: '#draggableContainer',
            onPress() { this.target.style.zIndex = 10; },
            onRelease() { this.target.style.zIndex = 1; }
        });
    }
}
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Swipe to Dismiss</h4>
                        <p>Swipe a card left or right to dismiss, a common mobile pattern.</p>
                        <div class="example flex flex-col items-center">
                            <div id="swipeCardDemo" class="w-64 h-20 bg-green-400 rounded-xl flex items-center justify-center text-white text-lg font-bold shadow-lg cursor-pointer select-none mb-2">Swipe Me Left or Right</div>
                            <button class="interactive-btn" id="swipeReplayBtn" onclick="replaySwipeCardDemo()" disabled>Replay</button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// GSAP Swipe to Dismiss
function initSwipeCardDemo() {
    if (window.Draggable) {
        // Remove any existing Draggable instance for #swipeCardDemo
        if (window.swipeCardDraggable && window.swipeCardDraggable[0]) {
            window.swipeCardDraggable[0].kill();
        }
        window.swipeCardDraggable = Draggable.create('#swipeCardDemo', {
            type: 'x',
            inertia: true,
            bounds: { minX: -200, maxX: 200 },
            onDragEnd: function() {
                if (Math.abs(this.x) > 120) {
                    gsap.to(this.target, { x: this.x > 0 ? 400 : -400, opacity: 0, duration: 0.4, onComplete: () => {
                        this.target.style.display = 'none';
                        const replayBtn = document.getElementById('swipeReplayBtn');
                        replayBtn.disabled = false;
                        replayBtn.classList.remove('opacity-50');
                    }});
                } else {
                    gsap.to(this.target, { x: 0, duration: 0.3, ease: 'power2.out' });
                }
            }
        });
    }
}
function replaySwipeCardDemo() {
    const card = document.getElementById('swipeCardDemo');
    card.style.display = '';
    card.style.opacity = 1;
    gsap.set(card, { x: 0 });
    const replayBtn = document.getElementById('swipeReplayBtn');
    replayBtn.disabled = true;
    replayBtn.classList.add('opacity-50');
    // Remove any existing Draggable instance before re-initializing
    if (window.swipeCardDraggable && window.swipeCardDraggable[0]) {
        window.swipeCardDraggable[0].kill();
    }
    window.initSwipeCardDemo();
}
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Pinch-to-Scale (Simulated)</h4>
                        <p>Simulate pinch/zoom with a slider (for desktop) or use two fingers on touch devices.</p>
                        <div class="example flex flex-col items-center">
                            <div id="pinchScaleContainer" class="relative w-40 h-40 flex items-center justify-center mb-2 border-2 border-purple-400 bg-slate-100" style="overflow:hidden;">
                                <div id="pinchScaleDemo" class="w-24 h-24 bg-purple-400 rounded-xl flex items-center justify-center text-white text-xl font-bold shadow-lg">Pinch/Zoom</div>
                            </div>
                            <input id="pinchSlider" type="range" min="0.5" max="2" step="0.01" value="1" class="w-32" />
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// Pinch-to-Scale (Simulated)
function initPinchScaleDemo() {
    const box = document.getElementById('pinchScaleDemo');
    const slider = document.getElementById('pinchSlider');
    slider.addEventListener('input', () => {
        gsap.to(box, { scale: slider.value, duration: 0.2, overwrite: true });
    });
}
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Tap Ripple Effect</h4>
                        <p>Mobile-friendly tap feedback with a ripple animation.</p>
                        <div class="example flex flex-col items-center">
                            <button id="tapRippleBtn" class="relative w-32 h-12 bg-pink-500 rounded-lg text-white font-bold overflow-hidden">Tap Me
                                <span id="tapRippleCircle" class="absolute rounded-full bg-white opacity-40 pointer-events-none" style="width:0;height:0;left:50%;top:50%;transform:translate(-50%,-50%) scale(1);"></span>
                            </button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// Tap Ripple Effect
function initTapRippleDemo() {
    const btn = document.getElementById('tapRippleBtn');
    const ripple = document.getElementById('tapRippleCircle');
    btn.addEventListener('pointerdown', function(e) {
        const rect = btn.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        ripple.style.width = ripple.style.height = size + 'px';
        ripple.style.left = (e.clientX - rect.left) + 'px';
        ripple.style.top = (e.clientY - rect.top) + 'px';
        gsap.fromTo(ripple, { scale: 0, opacity: 0.4 }, { scale: 1.5, opacity: 0, duration: 0.6, ease: 'power1.out', onComplete: () => {
            ripple.style.width = ripple.style.height = 0;
        }});
    });
}
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Long Press Animation</h4>
                        <p>Hold to trigger a different animation (color and scale change).</p>
                        <div class="example flex flex-col items-center">
                            <button id="longPressBtn" class="w-32 h-12 bg-yellow-400 rounded-lg text-black font-bold">Long Press Me</button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// Long Press Animation
function initLongPressDemo() {
    const btn = document.getElementById('longPressBtn');
    let pressTimer;
    btn.addEventListener('pointerdown', () => {
        pressTimer = setTimeout(() => {
            gsap.to(btn, { backgroundColor: '#f59e42', scale: 1.2, duration: 0.3 });
        }, 500);
    });
    btn.addEventListener('pointerup', () => {
        clearTimeout(pressTimer);
        gsap.to(btn, { backgroundColor: '#fde047', scale: 1, duration: 0.3 });
    });
    btn.addEventListener('pointerleave', () => {
        clearTimeout(pressTimer);
        gsap.to(btn, { backgroundColor: '#fde047', scale: 1, duration: 0.3 });
    });
}
</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: State & Data Driven">
                <h2>🔄 State-Driven & Data-Driven Animations</h2>
                <p>Trigger and synchronize animations based on app state, user actions, or data changes for dynamic, interactive UIs.</p>
                <div class="grid">
                    <div class="card">
                        <h4>Add/Remove Item Animation</h4>
                        <p>Animate items as they are added or removed from a list, simulating state-driven UI updates.</p>
                        <div class="example flex flex-col items-center">
                            <div id="stateListDemo" class="flex gap-2 mb-2"></div>
                            <button class="interactive-btn mb-1" onclick="addStateListItem()">Add Item</button>
                            <button class="interactive-btn" onclick="removeStateListItem()">Remove Item</button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// State-Driven Add/Remove Animation
let stateListCount = 3;
function renderStateListDemo() {
    const container = document.getElementById('stateListDemo');
    container.innerHTML = '';
    for (let i = 1; i <= stateListCount; i++) {
        const div = document.createElement('div');
        div.className = 'w-16 h-16 bg-blue-400 rounded flex items-center justify-center text-white font-bold text-lg shadow';
        div.textContent = i;
        container.appendChild(div);
    }
    gsap.from('#stateListDemo div', { opacity: 0, y: 30, stagger: 0.08, duration: 0.5, ease: 'power2.out' });
}
function addStateListItem() {
    stateListCount++;
    renderStateListDemo();
}
function removeStateListItem() {
    if (stateListCount > 0) {
        const container = document.getElementById('stateListDemo');
        const last = container.lastElementChild;
        if (last) {
            gsap.to(last, { opacity: 0, y: 30, duration: 0.4, ease: 'power2.in', onComplete: () => {
                stateListCount--;
                renderStateListDemo();
            }});
        }
    }
}
// Call renderStateListDemo() after DOMContentLoaded
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Animate on Data Change (Simulated API)</h4>
                        <p>Animate a value when it changes, simulating a data-driven UI (e.g., API update).</p>
                        <div class="example flex flex-col items-center">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-lg font-bold">Value:</span>
                                <span id="dataValueDemo" class="text-2xl font-mono bg-slate-200 px-4 py-1 rounded">0</span>
                            </div>
                            <button class="interactive-btn" onclick="updateDataValueDemo()">Simulate Data Change</button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// Animate on Data Change
let dataValue = 0;
function updateDataValueDemo() {
    const el = document.getElementById('dataValueDemo');
    const newValue = Math.floor(Math.random() * 100);
    gsap.fromTo(el, { scale: 1.2, backgroundColor: '#facc15' }, { scale: 1, backgroundColor: '#e2e8f0', duration: 0.5, ease: 'power2.out' });
    el.textContent = newValue;
    dataValue = newValue;
}
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Toggle Favorite (Heart) Animation</h4>
                        <p>Click the heart to toggle favorite state with a pop/bounce animation.</p>
                        <div class="example flex flex-col items-center">
                            <button id="heartToggleBtn" class="text-4xl select-none" style="background:none;border:none;outline:none;cursor:pointer;">♡</button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// Toggle Favorite Heart Animation
let isFav = false;
function initHeartToggleDemo() {
    const btn = document.getElementById('heartToggleBtn');
    btn.addEventListener('click', () => {
        isFav = !isFav;
        btn.textContent = isFav ? '♥' : '♡';
        gsap.fromTo(btn, { scale: 1.4, color: isFav ? '#f43f5e' : '#fff' }, { scale: 1, color: isFav ? '#f43f5e' : '#fff', duration: 0.4, ease: 'back.out(2)' });
    });
}
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Animated Counter</h4>
                        <p>Increment or decrement a number, animating the value and color on change.</p>
                        <div class="example flex flex-col items-center">
                            <div class="flex items-center gap-2 mb-2">
                                <button class="interactive-btn" onclick="decrementCounterDemo()">-</button>
                                <span id="counterValueDemo" class="text-2xl font-mono bg-slate-200 px-4 py-1 rounded">0</span>
                                <button class="interactive-btn" onclick="incrementCounterDemo()">+</button>
                            </div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// Animated Counter
let counterValue = 0;
function updateCounterDemo(val) {
    const el = document.getElementById('counterValueDemo');
    gsap.fromTo(el, { scale: 1.3, color: val > counterValue ? '#22d3ee' : '#f43f5e' }, { scale: 1, color: '#0f172a', duration: 0.4, ease: 'power2.out' });
    el.textContent = val;
    counterValue = val;
}
function incrementCounterDemo() {
    updateCounterDemo(counterValue + 1);
}
function decrementCounterDemo() {
    updateCounterDemo(counterValue - 1);
}
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Filtered List Animation</h4>
                        <p>Filter a list (even/odd) and animate items in/out.</p>
                        <div class="example flex flex-col items-center">
                            <div class="flex gap-2 mb-2">
                                <button class="interactive-btn" onclick="filterListDemo('all')">All</button>
                                <button class="interactive-btn" onclick="filterListDemo('even')">Even</button>
                                <button class="interactive-btn" onclick="filterListDemo('odd')">Odd</button>
                            </div>
                            <div id="filterListDemo" class="flex gap-2"></div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// Filtered List Animation
let filterListData = [1,2,3,4,5,6,7,8];
let filterListMode = 'all';
function renderFilterListDemo() {
    const container = document.getElementById('filterListDemo');
    container.innerHTML = '';
    let filtered = filterListData.filter(n => filterListMode === 'all' ? true : filterListMode === 'even' ? n % 2 === 0 : n % 2 === 1);
    filtered.forEach(n => {
        const div = document.createElement('div');
        div.className = 'w-10 h-10 bg-indigo-400 rounded flex items-center justify-center text-white font-bold text-lg shadow';
        div.textContent = n;
        container.appendChild(div);
    });
    gsap.from('#filterListDemo div', { opacity: 0, y: 20, stagger: 0.06, duration: 0.4, ease: 'power2.out' });
}
function filterListDemo(mode) {
    filterListMode = mode;
    renderFilterListDemo();
}
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Progress Bar (Animated on Data Change)</h4>
                        <p>Simulate a data update, animating a progress bar to a new value.</p>
                        <div class="example flex flex-col items-center">
                            <div class="w-64 h-6 bg-slate-200 rounded mb-2 overflow-hidden">
                                <div id="progressBarDemo" class="h-6 bg-green-400 rounded" style="width:0%"></div>
                            </div>
                            <button class="interactive-btn" onclick="updateProgressBarDemo()">Simulate Progress</button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// Progress Bar Animated on Data Change
function updateProgressBarDemo() {
    const bar = document.getElementById('progressBarDemo');
    const newVal = Math.floor(Math.random() * 100) + 1;
    gsap.to(bar, { width: newVal + '%', duration: 0.7, ease: 'power2.out' });
}
</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Design Tokens">
                <h2>🎨 Animation System & Design Tokens</h2>
                <p>Use design tokens to create a scalable, consistent animation system. Change motion globally with a single update.</p>
                <div class="grid">
                    <div class="card">
                        <h4>What Are Motion Design Tokens?</h4>
                        <ul>
                            <li>Design tokens are variables for motion: <code>--motion-duration</code>, <code>--motion-ease</code>, <code>--motion-distance</code>, etc.</li>
                            <li>They ensure consistency and make it easy to update animation styles across your app.</li>
                            <li>Tokens can be defined in CSS, JS, or a design system tool.</li>
                        </ul>
                        <div class="code-block"><pre><code class="language-css">:root {
  --motion-duration: 0.5s;
  --motion-ease: cubic-bezier(0.4,0,0.2,1);
  --motion-distance: 40px;
}
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Live Demo: Change Motion Tokens</h4>
                        <p>Change the duration and distance tokens to update all animations below.</p>
                        <div class="example flex flex-col items-center">
                            <label class="mb-2">Duration: <input id="tokenDuration" type="range" min="0.1" max="2" step="0.01" value="0.5" class="w-32 align-middle" /> <span id="tokenDurationVal">0.5s</span></label>
                            <label class="mb-2">Distance: <input id="tokenDistance" type="range" min="10" max="120" step="1" value="40" class="w-32 align-middle" /> <span id="tokenDistanceVal">40px</span></label>
                            <div class="flex gap-4 mt-4">
                                <button class="interactive-btn" onclick="runTokenAnimDemo('A')">Animate A</button>
                                <button class="interactive-btn" onclick="runTokenAnimDemo('B')">Animate B</button>
                            </div>
                            <div class="flex gap-4 mt-4">
                                <div id="tokenAnimA" class="w-16 h-16 bg-blue-400 rounded flex items-center justify-center text-white font-bold text-lg shadow">A</div>
                                <div id="tokenAnimB" class="w-16 h-16 bg-green-400 rounded flex items-center justify-center text-white font-bold text-lg shadow">B</div>
                            </div>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// Animation System with Design Tokens
let motionTokens = {
    duration: 0.5,
    distance: 40
};
function updateTokenInputs() {
    document.getElementById('tokenDurationVal').textContent = motionTokens.duration + 's';
    document.getElementById('tokenDistanceVal').textContent = motionTokens.distance + 'px';
}
document.getElementById('tokenDuration').addEventListener('input', e => {
    motionTokens.duration = parseFloat(e.target.value);
    updateTokenInputs();
});
document.getElementById('tokenDistance').addEventListener('input', e => {
    motionTokens.distance = parseInt(e.target.value);
    updateTokenInputs();
});
function runTokenAnimDemo(id) {
    const el = document.getElementById('tokenAnim' + id);
    gsap.fromTo(el, { x: -motionTokens.distance, opacity: 0 }, { x: 0, opacity: 1, duration: motionTokens.duration, ease: 'power2.out' });
}
updateTokenInputs();
</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: I18n & RTL">
                <h2>🌍 Internationalization & RTL Support</h2>
                <p>Ensure your animations work for all users, including those using right-to-left (RTL) languages and internationalized content.</p>
                <div class="grid">
                    <div class="card">
                        <h4>Best Practices</h4>
                        <ul>
                            <li>Use logical properties (<code>margin-inline-start</code>, <code>left</code>/<code>right</code>, <code>inline-size</code>) for positioning and animation.</li>
                            <li>Detect and respect the <code>dir</code> attribute (<code>ltr</code> or <code>rtl</code>) on the <code>&lt;html&gt;</code> or container element.</li>
                            <li>Mirror animation directions for RTL (e.g., slide in from the right instead of left).</li>
                            <li>Test with real RTL content and languages.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Live Demo: LTR/RTL Animation</h4>
                        <p>Toggle between LTR and RTL. The animation direction adapts automatically.</p>
                        <div class="example flex flex-col items-center">
                            <button class="interactive-btn mb-2" id="rtlToggleBtn">Switch to RTL</button>
                            <div id="rtlAnimDemo" class="w-40 h-16 bg-blue-400 rounded flex items-center justify-center text-white font-bold text-lg shadow mb-2">Animated Box</div>
                            <button class="interactive-btn" onclick="runRtlAnimDemo()">Animate</button>
                        </div>
                        <button class="demo-code-toggle">Show Code</button>
                        <div class="demo-code-block"><pre><code class="language-js">// LTR/RTL Animation Demo
let isRtl = false;
document.getElementById('rtlToggleBtn').addEventListener('click', () => {
    isRtl = !isRtl;
    document.documentElement.dir = isRtl ? 'rtl' : 'ltr';
    document.getElementById('rtlToggleBtn').textContent = isRtl ? 'Switch to LTR' : 'Switch to RTL';
});
function runRtlAnimDemo() {
    const el = document.getElementById('rtlAnimDemo');
    const dir = document.documentElement.dir === 'rtl' ? 1 : -1;
    gsap.fromTo(el, { x: dir * 120, opacity: 0 }, { x: 0, opacity: 1, duration: 0.7, ease: 'power2.out' });
}
</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Advanced: Security">
                <h2>🔒 Security & Best Practices</h2>
                <p>Keep your animations safe and robust by following security best practices, especially when dealing with dynamic or user-generated content.</p>
                <div class="grid">
                    <div class="card">
                        <h4>Security Checklist</h4>
                        <ul>
                            <li>Sanitize all user-generated content before animating or injecting into the DOM.</li>
                            <li>Never use <code>innerHTML</code> with untrusted data.</li>
                            <li>When animating SVG, avoid dynamic <code>href</code> or <code>on*</code> attributes from user input.</li>
                            <li>Escape dynamic values in animation code (e.g., for CSS, SVG, or HTML).</li>
                            <li>Keep dependencies up to date and audit for vulnerabilities.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Safe Dynamic SVG Example</h4>
                        <div class="code-block"><pre><code class="language-js">// Safe SVG injection (never use user input directly)
const safeSvg = `<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="#4ade80"/></svg>`;
document.getElementById('svgContainer').innerHTML = safeSvg; // Only if safeSvg is trusted
</code></pre></div>
                    </div>
                    <div class="card">
                        <h4>Escaping Dynamic Values</h4>
                        <div class="code-block"><pre><code class="language-js">// Escape dynamic values for CSS
function escapeCssValue(val) {
    return String(val).replace(/[^a-zA-Z0-9-_]/g, '');
}
const color = escapeCssValue(userInput);
element.style.backgroundColor = color;
</code></pre></div>
                    </div>
                </div>
            </div>

            <div class="section" data-topic="Recommended: YouTube Videos">
                <h2>📺 Recommended YouTube Videos</h2>
                <p>Level up your animation skills with these top YouTube videos and channels for web motion, GSAP, Framer Motion, and creative coding.</p>
                <div class="grid">
                    <div class="card">
                        <h4>GSAP & Creative Coding</h4>
                        <ul>
                            <li><a href="https://www.youtube.com/watch?v=Q1b6TC5rQ1A" target="_blank" rel="noopener">Codegrid: Magnetic Button Effect</a> – Step-by-step GSAP breakdown.</li>
                            <li><a href="https://www.youtube.com/watch?v=6oFvqLfRnsw" target="_blank" rel="noopener">Codegrid: Scroll-Driven Animation</a> – Advanced scroll effects with GSAP.</li>
                            <li><a href="https://www.youtube.com/@GreenSockLearning" target="_blank" rel="noopener">GSAP Official Channel</a> – Tutorials, tips, and deep dives.</li>
                            <li><a href="https://www.youtube.com/@CreativeCodingClub" target="_blank" rel="noopener">Creative Coding Club</a> – In-depth GSAP and creative coding tutorials.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Framer Motion & React Animation</h4>
                        <ul>
                            <li><a href="https://www.youtube.com/watch?v=1J5RkGABa2s" target="_blank" rel="noopener">Framer Motion: The Ultimate Guide</a> – Full walkthrough of Framer Motion for React.</li>
                            <li><a href="https://www.youtube.com/@Framer" target="_blank" rel="noopener">Framer Official Channel</a> – Product updates and motion design inspiration.</li>
                            <li><a href="https://www.youtube.com/watch?v=0LhBvp8qpro" target="_blank" rel="noopener">React Animation with Framer Motion</a> – Practical React animation patterns.</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Inspiration & Showcases</h4>
                        <ul>
                            <li><a href="https://www.youtube.com/@Awwwards" target="_blank" rel="noopener">Awwwards YouTube</a> – Showcases of award-winning web animation and design.</li>
                            <li><a href="https://www.youtube.com/@Codegrid" target="_blank" rel="noopener">Codegrid Channel</a> – Modern web animation breakdowns and tutorials.</li>
                            <li><a href="https://www.youtube.com/@CassieEvans" target="_blank" rel="noopener">Cassie Evans</a> – SVG, GSAP, and creative web animation.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer">
            <p>© 2025 XenoDesigns. All Rights Reserved.</p>
        </footer>
    </div>
    <button id="backToTopBtn" title="Go to top" aria-label="Back to top">↑</button>
    <div class="theme-switch-wrapper">
        <label class="theme-switch" for="darkModeToggle"><input type="checkbox" id="darkModeToggle" aria-label="Toggle dark mode" /><span class="slider"></span></label>
    </div>
    <div id="searchNav" aria-label="Search navigation">
        <button id="searchNavUp" title="Previous match" aria-label="Previous search match">↑</button>
        <span id="searchNavCount"></span>
        <button id="searchNavDown" title="Next match" aria-label="Next search match">↓</button>
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    gsap.registerPlugin(ScrollTrigger, Draggable, Flip, TextPlugin, MotionPathPlugin, CustomEase, Observer);

    // --- CORE DEMOS ---
    window.runToFromDemo = (type) => {
        const box = document.querySelector("#toFromDemoBox");
        const output = document.querySelector("#toFromOutput");
        gsap.killTweensOf(box);
        gsap.set(box, { clearProps: "all" });
        if (type === 'to') {
            gsap.to(box, { rotation: 360, x: 100, duration: 1, ease: 'power2.out' });
            output.textContent = `gsap.to(target, { rotation: 360, x: 100, duration: 1 });`;
        } else if (type === 'from') {
            gsap.from(box, { rotation: 360, x: 100, duration: 1, ease: 'power2.out' });
            output.textContent = `gsap.from(target, { rotation: 360, x: 100, duration: 1 });`;
        } else if (type === 'fromTo') {
            gsap.fromTo(box, { x: -100, opacity: 0 }, { x: 100, opacity: 1, rotation: 360, duration: 1.5, ease: 'power2.inOut' });
            output.textContent = `gsap.fromTo(target, { fromVars }, { toVars });`;
        }
    };

    let timelineControls;
    window.createTimelineDemo = (isReplay = false) => {
        if (timelineControls) timelineControls.kill();
        const box = document.querySelector("#timelineDemoBox");
        gsap.set(box, { clearProps: "all" });
        
        const duration = parseFloat(document.getElementById('timelineDuration').value) || 1;
        const rotation = parseFloat(document.getElementById('timelineRotation').value) || 360;
        const finalEase = document.getElementById('timelineEase').value || 'bounce.out';

        timelineControls = gsap.timeline({ paused: true, onUpdate: () => {
            const scrubber = document.getElementById('timelineScrubber');
            if (scrubber) scrubber.value = timelineControls.progress();
        }});
        
        timelineControls.to(box, { x: 200, rotation: rotation, duration: duration, ease: 'power2.inOut' });
        timelineControls.to(box, { y: 50, scale: 1.5, duration: 0.5, ease: 'power2.inOut' }, "-=0.5");
        timelineControls.to(box, { x: 0, scale: 1, rotation: 0, duration: 1, ease: finalEase });
        
        document.getElementById('timelineScrubber').value = 0;
        if (isReplay) timelineControls.play();
    };
    document.getElementById('timelineScrubber')?.addEventListener('input', (e) => {
        if (timelineControls) timelineControls.progress(e.target.value).pause();
    });
    ['timelineDuration', 'timelineRotation', 'timelineEase'].forEach(id => {
        document.getElementById(id)?.addEventListener('change', () => createTimelineDemo(false));
    });
    createTimelineDemo(false);

    window.runEaseDemo = (easeType) => {
        const box = document.querySelector("#easeDemoBox");
        gsap.fromTo(box, { x: 0 }, { x: box.parentElement.offsetWidth - 70, duration: 2, ease: easeType, overwrite: 'auto' });
        document.querySelector("#easeOutput").textContent = `ease: "${easeType}"`;
    };

    // --- SIMPLIFIED SCROLLTRIGGER DEMO ---
    const pinIcon = document.getElementById('pinIcon');
    if (pinIcon && window.ScrollTrigger) {
        // Simple scale animation on scroll
        gsap.to(pinIcon, {
            scale: 1.5,
            scrollTrigger: {
                trigger: "#pinTarget",
                start: "top center",
                end: "bottom center",
                scrub: 1,
                onUpdate: (self) => {
                    // Add rotation based on scroll progress
                    gsap.set(pinIcon, { rotation: self.progress * 360 });
                }
            }
        });
    }

    // --- PLUGINS DEMOS ---
    Draggable.create("#draggableDemo", { 
        bounds: document.querySelector("#draggableDemo").parentElement, 
        inertia: true, 
        type: "x,y"
    });
    const flipContainer = document.querySelector("#flipContainer");
    if(flipContainer) {
        for (let i = 1; i <= 4; i++) {
            const box = document.createElement('div');
            box.className = "flip-box bg-rose-500 rounded-lg h-24 flex items-center justify-center text-white font-bold cursor-pointer";
            box.textContent = i;
            flipContainer.appendChild(box);
        }
    }
    window.runFlipDemo = () => {
        const boxes = gsap.utils.toArray(".flip-box");
        const state = Flip.getState(boxes);
        for(let i = flipContainer.children.length; i >= 0; i--) {
            flipContainer.appendChild(flipContainer.children[Math.random() * i | 0]);
        }
        Flip.from(state, { duration: 0.8, ease: "power3.inOut", stagger: 0.08 });
    };

    // SVG Path Drawing Animation
    window.runSvgPathDemo = () => {
        const path = document.getElementById('svgPath');
        if (path) {
            const length = path.getTotalLength();
            gsap.set(path, { strokeDasharray: length, strokeDashoffset: length });
            gsap.to(path, { 
                strokeDashoffset: 0, 
                duration: 2, 
                ease: 'power2.inOut' 
            });
        }
    };

    // SVG Color Morph Animation
    let colorIndex = 0;
    const colors = ['#a855f7', '#ef4444', '#22c55e', '#f59e0b', '#3b82f6'];
    window.runSvgColorDemo = () => {
        colorIndex = (colorIndex + 1) % colors.length;
        gsap.to("#svgColorCircle", {
            fill: colors[colorIndex],
            duration: 0.8,
            ease: "power2.inOut"
        });
    };

    // SVG Filter Animation
    window.runSvgFilterDemo = () => {
        const filter = document.querySelector('#glowFilter feGaussianBlur');
        if (filter) {
            gsap.to(filter, {
                attr: { stdDeviation: 8 },
                duration: 1,
                ease: "power2.inOut",
                yoyo: true,
                repeat: 1
            });
        }
    };

    // SVG Morphing Animation
    let svgMorphState = 0;
    window.runSvgMorphDemo = () => {
        const circle = "M50,20 A30,30 0 1,1 49.9,20 Z";
        const star = "M50,20 L65,65 L20,35 L80,35 L35,65 Z";
        const triangle = "M50,20 L80,80 L20,80 Z";
        
        const shapes = [circle, star, triangle];
        const nextShape = (svgMorphState + 1) % shapes.length;
        
        gsap.to("#svgMorphShape", {
            attr: { d: shapes[nextShape] },
            duration: 1.2,
            ease: 'power2.inOut'
        });
        
        svgMorphState = nextShape;
    };

    // --- PERFORMANCE & WORKFLOW DEMOS ---
    const batchGrid = document.getElementById('batchGrid');
    if (batchGrid) {
        for (let i = 0; i < 16; i++) {
            const card = document.createElement('div');
            card.className = 'card bg-indigo-500';
            batchGrid.appendChild(card);
        }
        ScrollTrigger.batch("#batchGrid .card", {
            start: "top 85%",
            onEnter: batch => gsap.to(batch, { opacity: 1, scale: 1, stagger: 0.1, duration: 0.8, ease: "power2.out", overwrite: true }),
            onLeaveBack: batch => gsap.set(batch, { opacity: 0, scale: 0.5, overwrite: true })
        });
    }

    // --- FRAMER MOTION DEMOS (SIMULATED) ---
    // Demo 1: Typewriter Effect
    let typingSpeed = 100;
    let typingInterval;
    
    window.startTypingDemo = () => {
        const typingText = document.getElementById('typingText');
        const fullText = "Framer Motion is Powerful";
        
        if (!typingText) return;
        
        // Clear any existing interval
        if (typingInterval) clearInterval(typingInterval);
        
        // Reset text
        typingText.textContent = '';
        
        let currentIndex = 0;
        typingInterval = setInterval(() => {
            if (currentIndex < fullText.length) {
                typingText.textContent += fullText[currentIndex];
                currentIndex++;
            } else {
                clearInterval(typingInterval);
            }
        }, typingSpeed);
    };
    
    window.clearTypingDemo = () => {
        const typingText = document.getElementById('typingText');
        if (typingText) {
            typingText.textContent = '';
        }
        if (typingInterval) {
            clearInterval(typingInterval);
        }
    };
    
    window.typeFaster = () => {
        typingSpeed = Math.max(50, typingSpeed - 20);
        startTypingDemo();
    };


    const framerCardDemo = document.getElementById('framerCardDemo');
    if (framerCardDemo) {
        const shine = document.getElementById('framerCardShine');
        const shineX = gsap.quickTo(shine, "background-position-x", { duration: 0.4, ease: "power2" });
        const shineY = gsap.quickTo(shine, "background-position-y", { duration: 0.4, ease: "power2" });
        gsap.set(framerCardDemo, { transformStyle: "preserve-3d", transformPerspective: 1000 });
        framerCardDemo.addEventListener('mouseenter', () => gsap.to(shine, { opacity: 1, duration: 0.3 }));
        framerCardDemo.addEventListener('mouseleave', () => gsap.to(shine, { opacity: 0, duration: 0.3 }));
        framerCardDemo.addEventListener('mousemove', (e) => {
            const { width, height, left, top } = framerCardDemo.getBoundingClientRect();
            const x = e.clientX - left;
            const y = e.clientY - top;
            const xPercent = (x / width) * 100;
            const yPercent = (y / height) * 100;
            shineX(`${xPercent}%`);
            shineY(`${yPercent}%`);
        });
    }

    // Demo 3: Fixed AnimatePresence Demo
    const framerPresenceContainer = document.getElementById('framerPresenceContainer');
    window.framerItemCount = 3;
    
    const createFramerItem = (id) => {
        if (!framerPresenceContainer) return;
        
        const item = document.createElement('div');
        item.className = 'framer-demo-item w-48 h-12 bg-blue-500 text-white rounded-lg flex items-center justify-center font-medium shadow-md';
        item.textContent = `Item ${id}`;
        item.dataset.id = id;
        framerPresenceContainer.appendChild(item);
        
        gsap.from(item, { 
            opacity: 0, 
            x: -100, 
            scale: 0.8, 
            duration: 0.5, 
            ease: 'power2.out' 
        });
    };
    
    window.addFramerPresenceItem = () => {
        window.framerItemCount++;
        createFramerItem(window.framerItemCount);
    };
    
    window.removeFramerPresenceItem = () => {
        const lastItem = framerPresenceContainer?.lastElementChild;
        if (lastItem) {
            gsap.to(lastItem, {
                opacity: 0,
                x: 100,
                scale: 0.5,
                duration: 0.5,
                ease: 'power2.in',
                onComplete: () => lastItem.remove()
            });
        }
    };
    
    // Initialize presence demo
    if (framerPresenceContainer) {
        framerPresenceContainer.innerHTML = ''; // Clear any existing items
        for (let i = 1; i <= window.framerItemCount; i++) {
            createFramerItem(i);
        }
    }

    // New Framer Motion Demo Functions
    window.runFramerLayoutDemo = () => {
        const items = document.querySelectorAll('.layout-item');
        items.forEach((item, index) => {
            gsap.to(item, {
                scale: 1.2,
                duration: 0.3,
                ease: 'power2.out',
                delay: index * 0.1,
                yoyo: true,
                repeat: 1
            });
        });
    };

    // Demo 4: Card Stack Demo
    window.runCardStackDemo = () => {
        const cards = document.querySelectorAll('.card-stack-item');
        if (cards.length === 0) return;
        
        // Shuffle the cards
        const shuffled = Array.from(cards).sort(() => Math.random() - 0.5);
        
        cards.forEach((card, index) => {
            const target = shuffled[index];
            const targetZIndex = target.style.zIndex;
            const targetTop = target.style.top;
            const targetLeft = target.style.left;
            
            gsap.to(card, {
                zIndex: targetZIndex,
                top: targetTop,
                left: targetLeft,
                duration: 0.8,
                ease: 'power2.inOut',
                delay: index * 0.1
            });
        });
    };
    
    window.resetCardStackDemo = () => {
        const cards = document.querySelectorAll('.card-stack-item');
        if (cards.length === 0) return;
        
        const positions = [
            { zIndex: 1, top: '0px', left: '0px' },
            { zIndex: 2, top: '-8px', left: '8px' },
            { zIndex: 3, top: '-16px', left: '16px' }
        ];
        
        cards.forEach((card, index) => {
            const pos = positions[index];
            gsap.to(card, {
                zIndex: pos.zIndex,
                top: pos.top,
                left: pos.left,
                duration: 0.6,
                ease: 'power2.out',
                delay: index * 0.1
            });
        });
    };



    // --- CODEGRID MASTERCLASS DEMOS ---
    const magneticButton = document.getElementById('magnetic-button');
    const magneticCursor = document.getElementById('magnetic-cursor');
    if (magneticButton && magneticCursor) {
        const btnXTo = gsap.quickTo(magneticButton, "x", { duration: 0.4, ease: "power3" });
        const btnYTo = gsap.quickTo(magneticButton, "y", { duration: 0.4, ease: "power3" });
        const cursorXTo = gsap.quickTo(magneticCursor, "x", { duration: 0.2, ease: "power2" });
        const cursorYTo = gsap.quickTo(magneticCursor, "y", { duration: 0.2, ease: "power2" });

        window.addEventListener('mousemove', (e) => {
            cursorXTo(e.clientX);
            cursorYTo(e.clientY);
        });

        magneticButton.addEventListener('mousemove', (e) => {
            const { clientX, clientY } = e;
            const { height, width, left, top } = magneticButton.getBoundingClientRect();
            const x = clientX - (left + width / 2);
            const y = clientY - (top + height / 2);
            btnXTo(x * 0.3);
            btnYTo(y * 0.3);
        });
        magneticButton.addEventListener('mouseleave', () => {
            btnXTo(0);
            btnYTo(0);
        });
    }

    function createMarquee(selector, items, speed, direction = 1) {
        const row = document.querySelector(selector);
        if (!row) return;
        row.innerHTML = '';
        items.forEach(item => {
            const span = document.createElement('span');
            span.textContent = item;
            row.appendChild(span);
        });
        const spans = Array.from(row.children);
        spans.forEach(span => row.appendChild(span.cloneNode(true)));

        const tl = gsap.to(row, {
            xPercent: direction * -100,
            duration: speed,
            ease: 'none',
            repeat: -1,
        });

        ScrollTrigger.create({
            trigger: "body",
            start: "top top",
            end: "bottom bottom",
            onUpdate: self => {
                const newTimeScale = Math.abs(self.getVelocity() / 200) + 1;
                gsap.to(tl, { timeScale: newTimeScale, duration: 0.2, ease: 'power2.out' });
            }
        });
    }
    createMarquee('#marquee1', ['GSAP', 'ScrollTrigger', 'Flip', 'Draggable'], 20, 1);
    createMarquee('#marquee2', ['Performance', 'React', 'Vue', 'SVG'], 25, -1);

    // --- STAGGER DEMO ---
    let staggerTl;
    window.runStaggerDemo = () => {
        if (staggerTl) staggerTl.kill();
        const staggerAmount = parseFloat(document.getElementById('staggerAmount').value);
        const staggerDuration = parseFloat(document.getElementById('staggerDuration').value);
        staggerTl = gsap.from("#staggerDemoGrid div", {
            y: 50,
            opacity: 0,
            stagger: staggerAmount,
            duration: staggerDuration,
            ease: "power2.out"
        });
    };
    document.getElementById('staggerAmount')?.addEventListener('input', runStaggerDemo);
    document.getElementById('staggerDuration')?.addEventListener('input', runStaggerDemo);
    runStaggerDemo();

    // --- UI & UX ---
    const sections = document.querySelectorAll('.section');
    const tocList = document.querySelector('#tocNav ul');
    
    if (window.IntersectionObserver) {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) entry.target.classList.add('is-visible');
            });
        }, { threshold: 0.05 });
        sections.forEach(section => observer.observe(section));
    } else {
        sections.forEach(section => section.classList.add('is-visible'));
    }

    if (tocList) {
        const createId = (text) => text.trim().toLowerCase().replace(/[^a-z0-9\s-]/g, '').replace(/[\s-]+/g, '-');
        sections.forEach(section => {
            const h2 = section.querySelector('h2');
            if (h2) {
                const title = h2.textContent.replace(/^[^\w]*/, '').trim();
                section.id = createId(title);
                tocList.innerHTML += `<li><a href="#${section.id}">${title}</a></li>`;
            }
        });
    }

    const scrollObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            const id = entry.target.getAttribute('id');
            const link = tocList.querySelector(`a[href="#${id}"]`);
            if (entry.isIntersecting) {
                tocList.querySelectorAll('a.active').forEach(a => a.classList.remove('active'));
                if (link) link.classList.add('active');
            }
        });
    }, { rootMargin: "-50% 0px -50% 0px" });
    sections.forEach(section => scrollObserver.observe(section));
    
    const filterContainer = document.getElementById('filterContainer');
    filterContainer.addEventListener('click', (e) => {
        if (e.target.tagName === 'BUTTON') {
            const filter = e.target.dataset.filter;
            filterContainer.querySelector('button.active').classList.remove('active');
e.target.classList.add('active');
            sections.forEach(section => {
                const topic = section.dataset.topic;
                section.style.display = (filter === 'all' || topic.includes(filter)) ? 'block' : 'none';
            });
        }
    });

    const backToTopBtn = document.getElementById('backToTopBtn');
    window.addEventListener('scroll', () => {
        backToTopBtn.style.display = (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) ? "block" : "none";
    });
    backToTopBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

    const darkModeToggle = document.getElementById('darkModeToggle');
    const htmlEl = document.documentElement;
    if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        htmlEl.classList.add('dark');
        darkModeToggle.checked = true;
    }
    darkModeToggle.addEventListener('change', () => {
        htmlEl.classList.toggle('dark');
        localStorage.setItem('theme', htmlEl.classList.contains('dark') ? 'dark' : 'light');
    });

    // --- LIVE SEARCH ---
    const searchInput = document.getElementById('searchInput');
    const allSearchableContent = new Map();
    document.querySelectorAll('.section h2, .section h3, .section h4, .section p, .section li, .card p, .card li').forEach(el => {
        allSearchableContent.set(el, el.innerHTML);
    });
    
    const debounce = (func, delay) => {
        let timeout;
        return (...args) => {
            clearTimeout(timeout);
            timeout = setTimeout(() => func.apply(this, args), delay);
        };
    };

    const performSearch = () => {
        const query = searchInput.value.trim().toLowerCase();
        allSearchableContent.forEach((originalHTML, el) => {
            if (query === '') {
                el.innerHTML = originalHTML;
            } else {
                const textContent = el.textContent.toLowerCase();
                if (textContent.includes(query)) {
                    const regex = new RegExp(`(${query.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')})`, 'gi');
                    el.innerHTML = originalHTML.replace(regex, `<span class="highlight">$1</span>`);
                } else {
                    el.innerHTML = originalHTML;
                }
            }
        });
    };
    searchInput.addEventListener('input', debounce(performSearch, 300));

    // --- FINAL SETUP ---
    document.querySelectorAll('.code-block, .demo-code-block').forEach(block => {
        if (!block.querySelector('.copy-btn')) {
            const btn = document.createElement('button');
            btn.className = 'copy-btn';
            btn.textContent = 'Copy';
            btn.onclick = () => {
                const code = block.querySelector('code, pre').innerText;
                navigator.clipboard.writeText(code).then(() => {
                    btn.textContent = 'Copied!';
                    btn.classList.add('copied');
                    setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 1200);
                });
            };
            block.appendChild(btn);
        }
    });
    document.querySelectorAll('.demo-code-toggle').forEach(btn => {
        const codeBlock = btn.nextElementSibling;
        if (codeBlock && codeBlock.classList.contains('demo-code-block')) {
            btn.addEventListener('click', () => {
                const isVisible = codeBlock.classList.toggle('visible');
                btn.textContent = isVisible ? 'Hide Code' : 'Show Code';
                if (isVisible) hljs.highlightElement(codeBlock.querySelector('code'));
            });
        }
    });
    hljs.highlightAll();

    // --- ADVANCED: REAL-WORLD RECIPES DEMO ---
    window.runHeroRevealDemo = function() {
        gsap.set(["#heroRevealHeadline", "#heroRevealSub", "#heroRevealImg"], { opacity: 0, y: 60 });
        gsap.to("#heroRevealHeadline", { opacity: 1, y: 0, duration: 1, ease: "power4.out", delay: 0.1 });
        gsap.to("#heroRevealSub", { opacity: 1, y: 0, duration: 1, ease: "power4.out", delay: 0.4 });
        gsap.to("#heroRevealImg", { opacity: 1, y: 0, duration: 1.2, ease: "power3.out", delay: 0.7 });
    };
    // Optionally, auto-trigger on scroll:
    if (window.ScrollTrigger) {
        ScrollTrigger.create({
            trigger: "#heroRevealDemo",
            start: "top 80%",
            once: true,
            onEnter: runHeroRevealDemo
        });
    } else {
        // Fallback: run on load
        runHeroRevealDemo();
    }

    // --- ADVANCED: SCROLL ANIMATIONS DEMO ---
    function runHorizontalScrollDemo() {
        const container = document.getElementById('horizontalScrollDemo');
        if (!container) return;
        gsap.set(container, { x: 0 });
        if (window.ScrollTrigger) {
            ScrollTrigger.create({
                trigger: container,
                start: 'top center',
                end: () => '+=' + (container.scrollWidth - window.innerWidth),
                pin: true,
                scrub: 1,
                anticipatePin: 1,
                onUpdate: self => {
                    gsap.to(container, { x: -self.progress * (container.scrollWidth - window.innerWidth), duration: 0.1, overwrite: 'auto' });
                }
            });
        }
    }
    // Auto-run after DOMContentLoaded
    runHorizontalScrollDemo();

    // --- SCROLLTRIGGER DEMOS INITIALIZATION ---
    // Demo 1: Fade-in items
    if (window.ScrollTrigger) {
        gsap.utils.toArray('.fade-in-item').forEach(item => {
            gsap.fromTo(item, 
                { opacity: 0, y: 50 },
                { 
                    opacity: 1, 
                    y: 0, 
                    duration: 0.8,
                    ease: "power2.out",
                    scrollTrigger: {
                        trigger: item,
                        start: "top 85%",
                        end: "bottom 15%",
                        toggleActions: "play none none reverse"
                    }
                }
            );
        });
    }

    // Demo 2: Simple pinned section
    if (window.ScrollTrigger) {
        const pinTarget = document.getElementById('pinTarget');
        if (pinTarget) {
            ScrollTrigger.create({
                trigger: pinTarget,
                start: "top top",
                end: "+=400",
                pin: true,
                pinSpacing: false
            });
        }
    }

    // Demo 3: Scroll-triggered counter animation
    if (window.ScrollTrigger) {
        const counter1 = document.getElementById('counter1');
        if (counter1) {
            ScrollTrigger.create({
                trigger: counter1,
                start: "top 80%",
                onEnter: () => {
                    gsap.to("#counter1", {
                        innerHTML: 150,
                        duration: 2,
                        ease: "power2.out",
                        snap: { innerHTML: 1 },
                        onUpdate: function() {
                            this.targets()[0].innerHTML = Math.ceil(this.targets()[0].innerHTML);
                        }
                    });
                    gsap.to("#counter2", {
                        innerHTML: 89,
                        duration: 2,
                        ease: "power2.out",
                        snap: { innerHTML: 1 },
                        onUpdate: function() {
                            this.targets()[0].innerHTML = Math.ceil(this.targets()[0].innerHTML);
                        }
                    });
                    gsap.to("#counter3", {
                        innerHTML: 23,
                        duration: 2,
                        ease: "power2.out",
                        snap: { innerHTML: 1 },
                        onUpdate: function() {
                            this.targets()[0].innerHTML = Math.ceil(this.targets()[0].innerHTML);
                        }
                    });
                }
            });
        }
    }

    // Reset counters function
    window.resetCounters = function() {
        gsap.set(["#counter1", "#counter2", "#counter3"], { innerHTML: 0 });
        // Refresh the ScrollTrigger to allow re-triggering
        ScrollTrigger.refresh();
    };

    // --- ADVANCED: SVG MASTERY DEMOS ---
    function runSvgDrawDemo() {
        const path = document.getElementById('svgDrawPath');
        if (!path) return;
        const length = path.getTotalLength();
        gsap.set(path, { strokeDasharray: length, strokeDashoffset: length });
        gsap.to(path, { strokeDashoffset: 0, duration: 2, ease: 'power2.inOut' });
    }
    let isCircle = true;
    function runSvgMorphDemo() {
        const shape = document.getElementById('svgMorphShape');
        if (!shape) return;
        const circle = "M60,20 A40,40 0 1,1 59.9,20 Z";
        const star = "M60,20 L72,80 L20,40 L100,40 L48,80 Z";
        gsap.to(shape, {
            attr: { d: isCircle ? star : circle },
            duration: 1.2,
            ease: 'power2.inOut'
        });
        isCircle = !isCircle;
    }

    // --- ADVANCED: 3D EFFECTS DEMOS ---
    // 3D Card Flip
    (function() {
        const card = document.getElementById('cardFlipDemo');
        const inner = document.getElementById('cardFlipInner');
        if (card && inner) {
            let isFlipped = false;
            card.addEventListener('click', () => {
                isFlipped = !isFlipped;
                gsap.to(inner, { rotationY: isFlipped ? 180 : 0, duration: 0.7, ease: 'power2.inOut' });
            });
        }
    })();
    // Parallax Layers (Scroll-Based)
    (function() {
        if (window.ScrollTrigger) {
            const bg = document.getElementById('parallaxBg');
            const mid = document.getElementById('parallaxMid');
            const fg = document.getElementById('parallaxFg');
            if (bg && mid && fg) {
                gsap.set([bg, mid, fg], { y: 0 });
                gsap.to(bg, {
                    y: 60,
                    scrollTrigger: { trigger: bg, start: 'top bottom', end: 'bottom top', scrub: true }
                });
                gsap.to(mid, {
                    y: 30,
                    scrollTrigger: { trigger: mid, start: 'top bottom', end: 'bottom top', scrub: true }
                });
                gsap.to(fg, {
                    y: 0,
                    scrollTrigger: { trigger: fg, start: 'top bottom', end: 'bottom top', scrub: true }
                });
            } else {
                console.error('Parallax layers: One or more elements missing.');
            }
        } else {
            const demo = document.getElementById('parallaxBg');
            if (demo) demo.innerHTML = 'ScrollTrigger not available.';
            console.error('ScrollTrigger not available for parallax layers demo.');
        }
    })();
    // 3D Cube Rotation
    (function() {
        let cube3dX = 0, cube3dY = 0;
        window.rotateCube3d = function(axis, deg) {
            const cube = document.getElementById('cube3d');
            if (!cube) return;
            if (axis === 'x') cube3dX += deg;
            if (axis === 'y') cube3dY += deg;
            gsap.to(cube, { rotationX: cube3dX, rotationY: cube3dY, duration: 0.7, ease: 'power2.inOut' });
        };
    })();
    // 3D Card Stack
    (function() {
        window.cardStackOrder = [0,1,2];
        window.renderCardStack3d = function() {
            const container = document.getElementById('cardStack3d');
            if (!container) return;
            const cards = Array.from(container.children);
            const state = window.Flip ? Flip.getState(cards) : null;
            container.innerHTML = '';
            window.cardStackOrder.forEach((idx, i) => {
                const card = document.createElement('div');
                card.className = 'absolute w-48 h-32 rounded-xl shadow-lg flex items-center justify-center text-2xl font-bold text-white';
                card.style.background = ['#6366f1','#22d3ee','#f43f5e'][idx];
                card.style.transform = `translateZ(${-i*40}px) translateY(${-i*10}px)`;
                card.style.zIndex = 10-i;
                card.textContent = `Card ${idx+1}`;
                card.onclick = () => {
                    window.cardStackOrder = [idx, ...window.cardStackOrder.filter(x => x !== idx)];
                    window.renderCardStack3d();
                };
                container.appendChild(card);
            });
            if (window.Flip && state) {
                Flip.from(state, { duration: 0.7, ease: 'power2.inOut' });
            }
        };
        window.shuffleCardStack3d = function() {
            window.cardStackOrder = window.cardStackOrder.sort(() => Math.random() - 0.5);
            window.renderCardStack3d();
        };
        window.renderCardStack3d();
    })();
    // Parallax Layers with Depth (Mouse Responsive)
    (function() {
        const container = document.getElementById('parallaxDepthContainer');
        const bg = document.getElementById('parallaxDepthBg');
        const mid = document.getElementById('parallaxDepthMid');
        const fg = document.getElementById('parallaxDepthFg');
        if (container && bg && mid && fg) {
            container.addEventListener('mousemove', e => {
                const rect = container.getBoundingClientRect();
                const x = (e.clientX - rect.left) / rect.width - 0.5;
                const y = (e.clientY - rect.top) / rect.height - 0.5;
                gsap.to(bg, { x: x * 30, y: y * 30, duration: 0.4, overwrite: true });
                gsap.to(mid, { x: x * 60, y: y * 60, duration: 0.4, overwrite: true });
                gsap.to(fg, { x: x * 90, y: y * 90, duration: 0.4, overwrite: true });
            });
            container.addEventListener('mouseleave', () => {
                gsap.to([bg, mid, fg], { x: 0, y: 0, duration: 0.5 });
            });
        }
    })();
    // 3D Hover Tilt
    (function() {
        const card = document.getElementById('hoverTilt3d');
        if (card) {
            card.addEventListener('mousemove', e => {
                const rect = card.getBoundingClientRect();
                const x = (e.clientX - rect.left) / rect.width - 0.5;
                const y = (e.clientY - rect.top) / rect.height - 0.5;
                gsap.to(card, { rotationY: x * 30, rotationX: -y * 30, duration: 0.3, overwrite: true, boxShadow: '0 8px 32px rgba(0,0,0,0.3)' });
            });
            card.addEventListener('mouseleave', () => {
                gsap.to(card, { rotationY: 0, rotationX: 0, duration: 0.5, boxShadow: '0 5px 15px rgba(0,0,0,0.1)' });
            });
        }
    })();

    // --- ADVANCED: MICROINTERACTIONS DEMOS ---
    // Button Ripple
    (function() {
        const btn = document.getElementById('rippleBtnDemo');
        const ripple = document.getElementById('rippleCircle');
        if (btn && ripple) {
            btn.addEventListener('click', function(e) {
                const rect = btn.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                ripple.style.width = ripple.style.height = size + 'px';
                ripple.style.left = (e.clientX - rect.left) + 'px';
                ripple.style.top = (e.clientY - rect.top) + 'px';
                gsap.fromTo(ripple, { scale: 0, opacity: 0.4 }, { scale: 1.5, opacity: 0, duration: 0.6, ease: 'power1.out', onComplete: () => {
                    ripple.style.width = ripple.style.height = 0;
                }});
            });
        }
    })();
    // Animated Toggle
    (function() {
        const toggle = document.getElementById('toggleDemo');
        const knob = document.getElementById('toggleKnob');
        if (toggle && knob) {
            let toggled = false;
            toggle.addEventListener('click', () => {
                toggled = !toggled;
                gsap.to(knob, { x: toggled ? 32 : 0, backgroundColor: toggled ? '#4ade80' : '#fff', duration: 0.3, ease: 'power2.out' });
                gsap.to(toggle, { backgroundColor: toggled ? '#bbf7d0' : '#e5e7eb', duration: 0.3, ease: 'power2.out' });
            });
        }
    })();
    // Bouncy Loader
    function runLoaderDemo() {
        gsap.to('#loaderDemo div', {
            y: -18,
            repeat: 2,
            yoyo: true,
            stagger: 0.12,
            duration: 0.4,
            ease: 'back.inOut(2)'
        });
    }

    // --- ADVANCED: PERFORMANCE DEMO ---
    function runPerfBatchDemo() {
        const grid = document.getElementById('perfBatchGrid');
        if (!grid) return;
        grid.innerHTML = '';
        for (let i = 0; i < 20; i++) {
            const card = document.createElement('div');
            card.className = 'card bg-indigo-500';
            card.style.opacity = 0;
            card.style.transform = 'scale(0.5)';
            grid.appendChild(card);
        }
        if (window.ScrollTrigger) {
            ScrollTrigger.batch('#perfBatchGrid .card', {
                start: 'top 85%',
                onEnter: batch => gsap.to(batch, { opacity: 1, scale: 1, stagger: 0.08, duration: 0.7, ease: 'power2.out', overwrite: true }),
                onLeaveBack: batch => gsap.set(batch, { opacity: 0, scale: 0.5, overwrite: true })
            });
        }
    }
    runPerfBatchDemo();

    // --- ADVANCED: ACCESSIBILITY DEMO ---
    (function() {
        const reducedMotionToggle = document.getElementById('reducedMotionToggle');
        const a11yAnimBtn = document.getElementById('a11yAnimBtn');
        if (reducedMotionToggle && a11yAnimBtn) {
            let prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            reducedMotionToggle.checked = prefersReduced;
            reducedMotionToggle.addEventListener('change', () => {
                prefersReduced = reducedMotionToggle.checked;
            });
            a11yAnimBtn.addEventListener('click', () => {
                gsap.to(a11yAnimBtn, {
                    x: prefersReduced ? 40 : 120,
                    scale: prefersReduced ? 1.05 : 1.3,
                    duration: prefersReduced ? 0.2 : 1,
                    ease: prefersReduced ? 'none' : 'elastic.out(1,0.4)',
                    onComplete: () => gsap.to(a11yAnimBtn, { x: 0, scale: 1, duration: 0.3 })
                });
            });
        }
    })();

    // --- ADVANCED: EASING & PHYSICS DEMOS ---
    
    // New Easing Demo Function - Make it globally accessible
    window.runEasingDemo = function(easeType) {
        const box = document.getElementById('easingBox');
        const easeLabel = document.getElementById('currentEase');
        
        if (!box || !easeLabel) return;
        
        // Update label
        easeLabel.textContent = easeType;
        
        // Reset and animate
        gsap.set(box, { x: 0, scale: 1, rotation: 0 });
        gsap.to(box, {
            x: 320,
            scale: 1.2,
            rotation: 360,
            duration: 1.5,
            ease: easeType,
            overwrite: true,
            onComplete: () => {
                gsap.to(box, { x: 0, scale: 1, rotation: 0, duration: 0.8, ease: 'power2.out' });
            }
        });
    };
    
    // Staggered Cards Demo Function - Make it globally accessible
    window.runStaggeredCardsDemo = function() {
        const cards = document.querySelectorAll('.stagger-card');
        if (cards.length === 0) return;
        
        // Reset cards
        gsap.set(cards, { opacity: 0, y: 50 });
        
        // Animate cards in with stagger
        gsap.to(cards, {
            opacity: 1,
            y: 0,
            duration: 0.8,
            stagger: 0.1,
            ease: 'power2.out'
        });
    };
    function runPhysicsDemo(type) {
        const box = document.getElementById('physicsBox');
        gsap.set(box, { x: 0 });
        if (type === 'spring') {
            gsap.to(box, { x: 320, duration: 1.2, ease: 'elastic.out(1,0.4)' });
        } else if (type === 'bounce') {
            gsap.to(box, { x: 320, duration: 1.2, ease: 'bounce.out' });
        } else if (type === 'inertia' && window.Draggable) {
            Draggable.create(box, { type: 'x', inertia: true });
        }
    }

    // Fixed Easing Demo Functions - Make them globally accessible
    window.runSpringDemo = function(type) {
        const box = document.getElementById('springBox');
        if (!box) return;
        
        // Reset position
        gsap.set(box, { x: 0, y: 0, scale: 1 });
        
        const configs = {
            tight: { tension: 0.8, friction: 0.3 },
            loose: { tension: 0.2, friction: 0.8 },
            bouncy: { tension: 0.9, friction: 0.1 }
        };
        
        const config = configs[type] || configs.tight;
        
        gsap.to(box, {
            x: 320,
            y: 100,
            scale: 1.2,
            duration: 2,
            ease: `elastic.out(${config.tension}, ${config.friction})`,
            overwrite: true,
            onComplete: () => {
                gsap.to(box, { x: 0, y: 0, scale: 1, duration: 0.8, ease: 'power2.out' });
            }
        });
    };

    window.runBounceDemo = function(type) {
        const box = document.getElementById('bounceBox');
        if (!box) return;
        
        // Reset position
        gsap.set(box, { y: 0, scale: 1 });
        
        if (type === 'simple') {
            gsap.to(box, { 
                y: 200, 
                scale: 1.1,
                duration: 1, 
                ease: 'bounce.out',
                onComplete: () => {
                    gsap.to(box, { y: 0, scale: 1, duration: 0.5, ease: 'power2.out' });
                }
            });
        } else if (type === 'multiple') {
            const tl = gsap.timeline();
            tl.to(box, { y: 200, scale: 1.1, duration: 0.5, ease: 'power2.out' })
              .to(box, { y: 0, scale: 1, duration: 0.3, ease: 'bounce.out' })
              .to(box, { y: 100, scale: 1.05, duration: 0.4, ease: 'power2.out' })
              .to(box, { y: 0, scale: 1, duration: 0.2, ease: 'bounce.out' });
        } else if (type === 'decay') {
            gsap.to(box, { 
                y: 200, 
                scale: 1.1,
                duration: 1.5, 
                ease: 'power2.out',
                onUpdate: function() {
                    if (this.progress() > 0.5) {
                        this.ease = 'bounce.out';
                    }
                },
                onComplete: () => {
                    gsap.to(box, { y: 0, scale: 1, duration: 0.5, ease: 'power2.out' });
                }
            });
        }
    };

    window.initInertiaDemo = function() {
        const box = document.getElementById('inertiaBox');
        if (!box || !window.Draggable) {
            console.log('Draggable not available');
            return;
        }
        
        // Remove any existing draggable instances
        Draggable.get(box)?.kill();
        
        // Create new draggable instance
        Draggable.create(box, {
            type: 'x,y',
            inertia: true,
            bounds: '.example',
            onDrag: function() {
                gsap.set(box, { cursor: 'grabbing' });
            },
            onDragEnd: function() {
                gsap.set(box, { cursor: 'grab' });
            }
        });
        
        // Add visual feedback
        gsap.set(box, { cursor: 'grab' });
    };

    // Lottie Demo Functions
    let lottiePlaying = false;
    let lottieLooping = true;
    let lottieSpeed = 1;
    let lottieTimeline = null;
    let lottieProgress = 0;

    window.initLottieDemo = function() {
        const heart = document.getElementById('lottieHeart');
        const text = document.getElementById('lottieText');
        const progressBar = document.getElementById('lottieProgressBar');
        
        if (!heart || !text || !progressBar) return;
        
        // Create the main animation timeline
        lottieTimeline = gsap.timeline({
            repeat: -1,
            onUpdate: function() {
                lottieProgress = this.progress();
                progressBar.style.width = (lottieProgress * 100) + '%';
            }
        });
        
        // Heart beat animation
        lottieTimeline.to(heart, {
            scale: 1.2,
            duration: 0.5,
            ease: 'power2.inOut'
        })
        .to(heart, {
            scale: 0.8,
            duration: 0.3,
            ease: 'power2.inOut'
        })
        .to(heart, {
            scale: 1,
            duration: 0.2,
            ease: 'power2.out'
        });
        
        // Text animation
        lottieTimeline.to(text, {
            text: 'Loading...',
            duration: 0.5,
            ease: 'none'
        }, 0)
        .to(text, {
            text: 'Processing...',
            duration: 0.5,
            ease: 'none'
        }, 0.5)
        .to(text, {
            text: 'Complete!',
            duration: 0.5,
            ease: 'none'
        }, 1);
        
        // Icon rotation
        lottieTimeline.to('#lottieIcon', {
            rotation: 360,
            duration: 2,
            ease: 'none'
        }, 0);
        
        lottieTimeline.pause();
    };

    window.playLottieDemo = function() {
        if (lottieTimeline) {
            lottiePlaying = true;
            lottieTimeline.play();
        }
    };

    window.pauseLottieDemo = function() {
        if (lottieTimeline) {
            lottiePlaying = false;
            lottieTimeline.pause();
        }
    };

    window.stopLottieDemo = function() {
        if (lottieTimeline) {
            lottiePlaying = false;
            lottieTimeline.pause();
            lottieTimeline.progress(0);
            lottieProgress = 0;
            document.getElementById('lottieProgressBar').style.width = '0%';
        }
    };

    window.toggleLottieLoop = function() {
        lottieLooping = !lottieLooping;
        if (lottieTimeline) {
            lottieTimeline.repeat(lottieLooping ? -1 : 0);
        }
    };

    window.updateLottieSpeed = function() {
        const speedInput = document.getElementById('lottieSpeed');
        const speedValue = document.getElementById('lottieSpeedValue');
        lottieSpeed = parseFloat(speedInput.value);
        speedValue.textContent = lottieSpeed + 'x';
        
        if (lottieTimeline) {
            lottieTimeline.timeScale(lottieSpeed);
        }
    };

    // --- ADVANCED: REUSABLE COMPONENTS DEMOS ---
    // Modal
    window.openModalDemo = function() {
        const overlay = document.getElementById('modalDemoOverlay');
        const modal = document.getElementById('modalDemo');
        overlay.style.display = 'flex';
        gsap.fromTo(overlay, { opacity: 0 }, { opacity: 1, duration: 0.3, ease: 'power2.out' });
        gsap.fromTo(modal, { y: 80, opacity: 0, scale: 0.8 }, { y: 0, opacity: 1, scale: 1, duration: 0.5, ease: 'back.out(1.7)' });
    };
    window.closeModalDemo = function() {
        const overlay = document.getElementById('modalDemoOverlay');
        const modal = document.getElementById('modalDemo');
        gsap.to(modal, { y: 80, opacity: 0, scale: 0.8, duration: 0.4, ease: 'power2.in', onComplete: () => {
            gsap.to(overlay, { opacity: 0, duration: 0.2, onComplete: () => {
                overlay.style.display = 'none';
            }});
        }});
    };
    // Carousel
    const carouselSlidesData = [
        { color: '#4ade80', text: 'Slide 1' },
        { color: '#818cf8', text: 'Slide 2' },
        { color: '#f472b6', text: 'Slide 3' }
    ];
    let carouselIndex = 0;
    window.renderCarousel = function() {
        const slides = document.getElementById('carouselSlides');
        if (!slides) return;
        slides.innerHTML = '';
        carouselSlidesData.forEach((slide, i) => {
            const div = document.createElement('div');
            div.className = 'w-80 h-40 flex items-center justify-center text-2xl font-bold';
            div.style.background = slide.color;
            div.style.position = 'absolute';
            div.style.left = (i * 100) + '%';
            div.textContent = slide.text;
            slides.appendChild(div);
        });
        gsap.set(slides, { x: -carouselIndex * 320 });
    };
    window.carouselPrev = function() {
        carouselIndex = (carouselIndex - 1 + carouselSlidesData.length) % carouselSlidesData.length;
        gsap.to('#carouselSlides', { x: -carouselIndex * 320, duration: 0.6, ease: 'power2.inOut' });
    };
    window.carouselNext = function() {
        carouselIndex = (carouselIndex + 1) % carouselSlidesData.length;
        gsap.to('#carouselSlides', { x: -carouselIndex * 320, duration: 0.6, ease: 'power2.inOut' });
    };
    // Accordion
    let accordionOpen = false;
    window.toggleAccordionDemo = function() {
        const panel = document.getElementById('accordionPanel');
        if (!panel) return;
        if (!accordionOpen) {
            gsap.to(panel, { height: panel.scrollHeight, duration: 0.5, ease: 'power2.out', onComplete: () => {
                panel.style.height = 'auto';
            }});
        } else {
            gsap.to(panel, { height: 0, duration: 0.4, ease: 'power2.in' });
        }
        accordionOpen = !accordionOpen;
    };
    // Tooltip
    window.initTooltipDemo = function() {
        const tooltipTarget = document.getElementById('tooltipTarget');
        const tooltipDemo = document.getElementById('tooltipDemo');
        if (tooltipTarget && tooltipDemo) {
            tooltipTarget.addEventListener('mouseenter', e => {
                const rect = tooltipTarget.getBoundingClientRect();
                tooltipDemo.style.left = rect.left + rect.width / 2 - 60 + 'px';
                tooltipDemo.style.top = rect.top - 40 + window.scrollY + 'px';
                gsap.to(tooltipDemo, { opacity: 1, y: -10, duration: 0.3, pointerEvents: 'auto' });
            });
            tooltipTarget.addEventListener('mouseleave', () => {
                gsap.to(tooltipDemo, { opacity: 0, y: 0, duration: 0.2, pointerEvents: 'none' });
            });
        }
    };
    window.renderCarousel();
    window.initTooltipDemo();

    // --- ADVANCED: MOBILE & TOUCH DEMOS ---
    if (window.initDraggableTouchDemo) window.initDraggableTouchDemo();
    if (window.initSwipeCardDemo) window.initSwipeCardDemo();
    if (window.initPinchScaleDemo) window.initPinchScaleDemo();
    if (window.initTapRippleDemo) window.initTapRippleDemo();
    if (window.initLongPressDemo) window.initLongPressDemo();

    if (window.renderStateListDemo) window.renderStateListDemo();
    if (window.initHeartToggleDemo) window.initHeartToggleDemo();
    if (window.renderFilterListDemo) window.renderFilterListDemo();
    if (window.updateProgressBarDemo) window.updateProgressBarDemo();

    // Initialize Lottie demo
    if (window.initLottieDemo) window.initLottieDemo();

    if (window.updateTokenInputs) window.updateTokenInputs();

    if (window.runRtlAnimDemo) {
        document.getElementById('rtlToggleBtn').addEventListener('click', function() {
            window.isRtl = !window.isRtl;
            document.documentElement.dir = window.isRtl ? 'rtl' : 'ltr';
            this.textContent = window.isRtl ? 'Switch to LTR' : 'Switch to RTL';
        });
    }
});

// Draggable Card
window.initDraggableTouchDemo = function() {
    if (window.Draggable) {
        Draggable.create('#draggableTouchDemo', {
            type: 'x,y',
            inertia: true,
            edgeResistance: 0.7,
            bounds: '#draggableContainer',
            onPress() { this.target.style.zIndex = 10; },
            onRelease() { this.target.style.zIndex = 1; }
        });
    }
};
// Swipe to Dismiss
window.initSwipeCardDemo = function() {
    if (window.Draggable) {
        // Remove any existing Draggable instance for #swipeCardDemo
        if (window.swipeCardDraggable && window.swipeCardDraggable[0]) {
            window.swipeCardDraggable[0].kill();
        }
        window.swipeCardDraggable = Draggable.create('#swipeCardDemo', {
            type: 'x',
            inertia: true,
            bounds: { minX: -200, maxX: 200 },
            onDragEnd: function() {
                if (Math.abs(this.x) > 120) {
                    gsap.to(this.target, { x: this.x > 0 ? 400 : -400, opacity: 0, duration: 0.4, onComplete: () => {
                        this.target.style.display = 'none';
                        const replayBtn = document.getElementById('swipeReplayBtn');
                        replayBtn.disabled = false;
                        replayBtn.classList.remove('opacity-50');
                    }});
                } else {
                    gsap.to(this.target, { x: 0, duration: 0.3, ease: 'power2.out' });
                }
            }
        });
    }
};
window.replaySwipeCardDemo = function() {
    const card = document.getElementById('swipeCardDemo');
    card.style.display = '';
    card.style.opacity = 1;
    gsap.set(card, { x: 0 });
    const replayBtn = document.getElementById('swipeReplayBtn');
    replayBtn.disabled = true;
    replayBtn.classList.add('opacity-50');
    // Remove any existing Draggable instance before re-initializing
    if (window.swipeCardDraggable && window.swipeCardDraggable[0]) {
        window.swipeCardDraggable[0].kill();
    }
    window.initSwipeCardDemo();
}
window.initPinchScaleDemo = function() {
    const box = document.getElementById('pinchScaleDemo');
    const slider = document.getElementById('pinchSlider');
    if (box && slider) {
        slider.addEventListener('input', () => {
            gsap.to(box, { scale: slider.value, duration: 0.2, overwrite: true });
        });
    }
};
window.initTapRippleDemo = function() {
    const btn = document.getElementById('tapRippleBtn');
    const ripple = document.getElementById('tapRippleCircle');
    if (btn && ripple) {
        btn.addEventListener('pointerdown', function(e) {
            const rect = btn.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = (e.clientX - rect.left) + 'px';
            ripple.style.top = (e.clientY - rect.top) + 'px';
            gsap.fromTo(ripple, { scale: 0, opacity: 0.4 }, { scale: 1.5, opacity: 0, duration: 0.6, ease: 'power1.out', onComplete: () => {
                ripple.style.width = ripple.style.height = 0;
            }});
        });
    }
};
window.initLongPressDemo = function() {
    const btn = document.getElementById('longPressBtn');
    if (btn) {
        let pressTimer;
        btn.addEventListener('pointerdown', () => {
            pressTimer = setTimeout(() => {
                gsap.to(btn, { backgroundColor: '#f59e42', scale: 1.2, duration: 0.3 });
            }, 500);
        });
        btn.addEventListener('pointerup', () => {
            clearTimeout(pressTimer);
            gsap.to(btn, { backgroundColor: '#fde047', scale: 1, duration: 0.3 });
        });
        btn.addEventListener('pointerleave', () => {
            clearTimeout(pressTimer);
            gsap.to(btn, { backgroundColor: '#fde047', scale: 1, duration: 0.3 });
        });
    }
};

window.stateListCount = 3;
window.renderStateListDemo = function() {
    const container = document.getElementById('stateListDemo');
    container.innerHTML = '';
    for (let i = 1; i <= window.stateListCount; i++) {
        const div = document.createElement('div');
        div.className = 'w-16 h-16 bg-blue-400 rounded flex items-center justify-center text-white font-bold text-lg shadow';
        div.textContent = i;
        container.appendChild(div);
    }
    gsap.from('#stateListDemo div', { opacity: 0, y: 30, stagger: 0.08, duration: 0.5, ease: 'power2.out' });
};
window.addStateListItem = function() {
    window.stateListCount++;
    window.renderStateListDemo();
};
window.removeStateListItem = function() {
    if (window.stateListCount > 0) {
        const container = document.getElementById('stateListDemo');
        const last = container.lastElementChild;
        if (last) {
            gsap.to(last, { opacity: 0, y: 30, duration: 0.4, ease: 'power2.in', onComplete: () => {
                window.stateListCount--;
                window.renderStateListDemo();
            }});
        }
    }
};
window.dataValue = 0;
window.updateDataValueDemo = function() {
    const el = document.getElementById('dataValueDemo');
    const newValue = Math.floor(Math.random() * 100);
    gsap.fromTo(el, { scale: 1.2, backgroundColor: '#facc15' }, { scale: 1, backgroundColor: '#e2e8f0', duration: 0.5, ease: 'power2.out' });
    el.textContent = newValue;
    window.dataValue = newValue;
};
window.isFav = false;
window.initHeartToggleDemo = function() {
    const btn = document.getElementById('heartToggleBtn');
    if (btn) {
        btn.addEventListener('click', () => {
            window.isFav = !window.isFav;
            btn.textContent = window.isFav ? '♥' : '♡';
            gsap.fromTo(btn, { scale: 1.4, color: isFav ? '#f43f5e' : '#fff' }, { scale: 1, color: isFav ? '#f43f5e' : '#fff', duration: 0.4, ease: 'back.out(2)' });
        });
    }
};
window.counterValue = 0;
window.updateCounterDemo = function(val) {
    const el = document.getElementById('counterValueDemo');
    gsap.fromTo(el, { scale: 1.3, color: val > window.counterValue ? '#22d3ee' : '#f43f5e' }, { scale: 1, color: '#0f172a', duration: 0.4, ease: 'power2.out' });
    el.textContent = val;
    window.counterValue = val;
};
window.incrementCounterDemo = function() {
    window.updateCounterDemo(window.counterValue + 1);
};
window.decrementCounterDemo = function() {
    window.updateCounterDemo(window.counterValue - 1);
};
window.filterListData = [1,2,3,4,5,6,7,8];
window.filterListMode = 'all';
window.renderFilterListDemo = function() {
    const container = document.getElementById('filterListDemo');
    container.innerHTML = '';
    let filtered = window.filterListData.filter(n => window.filterListMode === 'all' ? true : window.filterListMode === 'even' ? n % 2 === 0 : n % 2 === 1);
    filtered.forEach(n => {
        const div = document.createElement('div');
        div.className = 'w-10 h-10 bg-indigo-400 rounded flex items-center justify-center text-white font-bold text-lg shadow';
        div.textContent = n;
        container.appendChild(div);
    });
    gsap.from('#filterListDemo div', { opacity: 0, y: 20, stagger: 0.06, duration: 0.4, ease: 'power2.out' });
};
window.filterListDemo = function(mode) {
    window.filterListMode = mode;
    window.renderFilterListDemo();
};
window.updateProgressBarDemo = function() {
    const bar = document.getElementById('progressBarDemo');
    const newVal = Math.floor(Math.random() * 100) + 1;
    gsap.to(bar, { width: newVal + '%', duration: 0.7, ease: 'power2.out' });
};

window.motionTokens = { duration: 0.5, distance: 40 };
window.updateTokenInputs = function() {
    document.getElementById('tokenDurationVal').textContent = window.motionTokens.duration + 's';
    document.getElementById('tokenDistanceVal').textContent = window.motionTokens.distance + 'px';
};
document.getElementById('tokenDuration').addEventListener('input', function(e) {
    window.motionTokens.duration = parseFloat(e.target.value);
    window.updateTokenInputs();
});
document.getElementById('tokenDistance').addEventListener('input', function(e) {
    window.motionTokens.distance = parseInt(e.target.value);
    window.updateTokenInputs();
});
window.runTokenAnimDemo = function(id) {
    const el = document.getElementById('tokenAnim' + id);
    gsap.fromTo(el, { x: -window.motionTokens.distance, opacity: 0 }, { x: 0, opacity: 1, duration: window.motionTokens.duration, ease: 'power2.out' });
};

window.isRtl = false;
window.runRtlAnimDemo = function() {
    const el = document.getElementById('rtlAnimDemo');
    const dir = document.documentElement.dir === 'rtl' ? 1 : -1;
    gsap.fromTo(el, { x: dir * 120, opacity: 0 }, { x: 0, opacity: 1, duration: 0.7, ease: 'power2.out' });
};

// --- FIXED FRAMER MOTION DEMO FUNCTIONS ---

// Demo 1: Fixed Text Animation
window.runFramerTextDemoReverse = function() {
    const chars = document.querySelectorAll('#framerTextDemo .char');
    gsap.to(chars, {
        opacity: 0,
        y: -50,
        scale: 0.8,
        stagger: 0.05,
        duration: 0.4,
        ease: 'power2.in'
    });
};

// Demo 2: Fixed Card Demo
window.resetFramerCard = function() {
    const card = document.getElementById('framerCardDemo');
    const shine = document.getElementById('framerCardShine');
    const glow = document.getElementById('framerCardGlow');
    
    if (card) gsap.set(card, { scale: 1, rotationX: 0, rotationY: 0 });
    if (shine) gsap.set(shine, { opacity: 0 });
    if (glow) gsap.set(glow, { opacity: 0 });
};

// Demo 3: Fixed Presence Demo
window.clearFramerPresenceItems = function() {
    const container = document.getElementById('framerPresenceContainer');
    if (!container) return;
    
    const items = container.querySelectorAll('.framer-demo-item');
    if (items.length === 0) return;
    
    gsap.to(items, {
        opacity: 0,
        x: 100,
        scale: 0.5,
        stagger: 0.1,
        duration: 0.4,
        ease: 'power2.in',
        onComplete: () => {
            container.innerHTML = '';
            window.framerItemCount = 0;
        }
    });
};

// Demo 4: Fixed Drag Demo
window.resetFramerDragDemo = function() {
    const items = document.querySelectorAll('.drag-item');
    if (items.length === 0) return;
    
    gsap.to(items, {
        x: 0,
        y: 0,
        duration: 0.6,
        ease: 'power2.out',
        stagger: 0.1
    });
};

// Demo 6: Progress Bar Demo
window.startFramerProgress = function() {
    const progressBar = document.getElementById('framerProgressBar');
    const progressText = document.getElementById('framerProgressText');
    
    gsap.to(progressBar, {
        width: '100%',
        duration: 3,
        ease: 'power2.inOut',
        onUpdate: function() {
            const progress = Math.round(this.progress() * 100);
            progressText.textContent = progress + '%';
        }
    });
};

window.resetFramerProgress = function() {
    const progressBar = document.getElementById('framerProgressBar');
    const progressText = document.getElementById('framerProgressText');
    
    gsap.to(progressBar, {
        width: '0%',
        duration: 0.5,
        ease: 'power2.out'
    });
    progressText.textContent = '0%';
};

window.setFramerProgress = function(percentage) {
    const progressBar = document.getElementById('framerProgressBar');
    const progressText = document.getElementById('framerProgressText');
    
    gsap.to(progressBar, {
        width: percentage + '%',
        duration: 1,
        ease: 'elastic.out(1, 0.3)'
    });
    progressText.textContent = percentage + '%';
};

// Initialize fixed card demo (replaces conflicting initialization)
const framerCardDemo = document.getElementById('framerCardDemo');
if (framerCardDemo) {
    const shine = document.getElementById('framerCardShine');
    const glow = document.getElementById('framerCardGlow');
    
    // Remove any existing event listeners
    const newCard = framerCardDemo.cloneNode(true);
    framerCardDemo.parentNode.replaceChild(newCard, framerCardDemo);
    
    // Add new event listeners
    newCard.addEventListener('mouseenter', () => {
        if (shine) gsap.to(shine, { opacity: 1, duration: 0.3 });
        if (glow) gsap.to(glow, { opacity: 1, duration: 0.3 });
        gsap.to(newCard, { scale: 1.05, duration: 0.3 });
    });
    
    newCard.addEventListener('mouseleave', () => {
        if (shine) gsap.to(shine, { opacity: 0, duration: 0.3 });
        if (glow) gsap.to(glow, { opacity: 0, duration: 0.3 });
        gsap.to(newCard, { scale: 1, duration: 0.3 });
    });
    
    newCard.addEventListener('mousemove', (e) => {
        if (!shine) return;
        const { width, height, left, top } = newCard.getBoundingClientRect();
        const x = e.clientX - left;
        const y = e.clientY - top;
        const xPercent = (x / width) * 100;
        const yPercent = (y / height) * 100;
        
        gsap.set(shine, {
            background: `radial-gradient(circle at ${xPercent}% ${yPercent}%, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0) 50%)`
        });
    });
}

// --- FINAL INITIALIZATION FIXES ---
// Initialize typing demo
setTimeout(() => {
    const typingText = document.getElementById('typingText');
    if (typingText) {
        typingText.textContent = '';
    }
}, 100);

// Initialize new easing demo
setTimeout(() => {
    const easingBox = document.getElementById('easingBox');
    if (easingBox) {
        gsap.set(easingBox, { x: 0, scale: 1, rotation: 0 });
    }
}, 100);

// Initialize staggered cards demo
setTimeout(() => {
    runStaggeredCardsDemo();
}, 300);

// Initialize easing demos
setTimeout(() => {
    const springBox = document.getElementById('springBox');
    const bounceBox = document.getElementById('bounceBox');
    const inertiaBox = document.getElementById('inertiaBox');
    
    if (springBox) gsap.set(springBox, { x: 0, y: 0, scale: 1 });
    if (bounceBox) gsap.set(bounceBox, { y: 0, scale: 1 });
    if (inertiaBox) gsap.set(inertiaBox, { cursor: 'grab' });
}, 400);

// Fix presence demo initialization
setTimeout(() => {
    const framerPresenceContainer = document.getElementById('framerPresenceContainer');
    if (framerPresenceContainer) {
        framerPresenceContainer.innerHTML = '';
        for (let i = 1; i <= 3; i++) {
            const item = document.createElement('div');
            item.className = 'framer-demo-item w-48 h-12 bg-blue-500 text-white rounded-lg flex items-center justify-center font-medium shadow-md';
            item.textContent = `Item ${i}`;
            item.dataset.id = i;
            framerPresenceContainer.appendChild(item);
            
            gsap.from(item, { 
                opacity: 0, 
                x: -100, 
                scale: 0.8, 
                duration: 0.5, 
                ease: 'power2.out' 
            });
        }
    }
}, 200);
</script>
</body>
</html>